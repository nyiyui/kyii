import{S as O,i as R,s as j,k as U,e as w,M as z,d as m,m as N,c as M,a as E,g as _,o as b,p as J,q as y,K as P,v as D,n as K,w as F,x as q,y as x,E as I,B,b as A,J as v,_ as G,t as g,h}from"../chunks/index-471c5598.js";import{c as H,u as L,Y as Q,a as V,M as W}from"../chunks/api2-564f7f8d.js";import{B as T}from"../chunks/Box-a27f9004.js";import{I as X}from"../chunks/IdInput-1fe72090.js";import{p as Z}from"../chunks/stores-08fbc986.js";import{g as ee}from"../chunks/util-92d9fe41.js";import"../chunks/index-0b2b7ad8.js";import"../chunks/store-669d404b.js";import"../chunks/singletons-d1fb5791.js";import"../chunks/Icon-b960e3f0.js";import"../chunks/Loading-28866ca5.js";import"../chunks/BoxError-e4fbeeb7.js";import"../chunks/UnsavedChanges-a25429c7.js";function te(f){let t,r;return t=new X({}),{c(){F(t.$$.fragment)},l(n){q(t.$$.fragment,n)},m(n,s){x(t,n,s),r=!0},p:I,i(n){r||(y(t.$$.fragment,n),r=!0)},o(n){b(t.$$.fragment,n),r=!1},d(n){B(t,n)}}}function re(f){let t,r,n,s,e,u,a,o,c,l,i;e=new T({props:{level:"info",$$slots:{default:[ne]},$$scope:{ctx:f}}});const $=[se,oe],k=[];function Y(p,d){return p[2]===p[1].SignedUp?0:p[2]===p[1].MissingPerms?1:-1}return~(a=Y(f))&&(o=k[a]=$[a](f)),{c(){t=w("form"),r=w("input"),s=U(),F(e.$$.fragment),u=U(),o&&o.c(),this.h()},l(p){t=M(p,"FORM",{id:!0});var d=E(t);r=M(d,"INPUT",{type:!0}),s=N(d),q(e.$$.fragment,d),u=N(d),o&&o.l(d),d.forEach(m),this.h()},h(){A(r,"type","button"),r.disabled=n=f[2]!==f[1].Init,r.value="Create New Account",A(t,"id","signup")},m(p,d){_(p,t,d),v(t,r),v(t,s),x(e,t,null),v(t,u),~a&&k[a].m(t,null),c=!0,l||(i=G(r,"click",f[4]),l=!0)},p(p,d){(!c||d&6&&n!==(n=p[2]!==p[1].Init))&&(r.disabled=n);const C={};d&512&&(C.$$scope={dirty:d,ctx:p}),e.$set(C);let S=a;a=Y(p),a!==S&&(o&&(K(),b(k[S],1,1,()=>{k[S]=null}),J()),~a?(o=k[a],o||(o=k[a]=$[a](p),o.c()),y(o,1),o.m(t,null)):o=null)},i(p){c||(y(e.$$.fragment,p),y(o),c=!0)},o(p){b(e.$$.fragment,p),b(o),c=!1},d(p){p&&m(t),B(e),~a&&k[a].d(),l=!1,i()}}}function ne(f){let t,r,n,s;return{c(){t=g("You can choose your name, username, APs, AFs, etc "),r=w("em"),n=g("after"),s=g(" you create your account.")},l(e){t=h(e,"You can choose your name, username, APs, AFs, etc "),r=M(e,"EM",{});var u=E(r);n=h(u,"after"),u.forEach(m),s=h(e," you create your account.")},m(e,u){_(e,t,u),_(e,r,u),v(r,n),_(e,s,u)},p:I,d(e){e&&m(t),e&&m(r),e&&m(s)}}}function oe(f){let t,r,n,s;return t=new T({props:{level:"error",$$slots:{default:[ie]},$$scope:{ctx:f}}}),n=new T({props:{level:"info",$$slots:{default:[le]},$$scope:{ctx:f}}}),{c(){F(t.$$.fragment),r=U(),F(n.$$.fragment)},l(e){q(t.$$.fragment,e),r=N(e),q(n.$$.fragment,e)},m(e,u){x(t,e,u),_(e,r,u),x(n,e,u),s=!0},i(e){s||(y(t.$$.fragment,e),y(n.$$.fragment,e),s=!0)},o(e){b(t.$$.fragment,e),b(n.$$.fragment,e),s=!1},d(e){B(t,e),e&&m(r),B(n,e)}}}function se(f){let t,r;return{c(){t=w("a"),r=g("Next"),this.h()},l(n){t=M(n,"A",{href:!0});var s=E(t);r=h(s,"Next"),s.forEach(m),this.h()},h(){A(t,"href","/config")},m(n,s){_(n,t,s),v(t,r)},i:I,o:I,d(n){n&&m(t)}}}function ie(f){let t;return{c(){t=g("Forbidden (not enough perms).")},l(r){t=h(r,"Forbidden (not enough perms).")},m(r,n){_(r,t,n)},d(r){r&&m(t)}}}function le(f){let t,r,n,s,e,u,a;return{c(){t=g("Try "),r=w("a"),n=g("logging in"),s=g(" or "),e=w("a"),u=g("switching"),a=g("."),this.h()},l(o){t=h(o,"Try "),r=M(o,"A",{href:!0});var c=E(r);n=h(c,"logging in"),c.forEach(m),s=h(o," or "),e=M(o,"A",{href:!0});var l=E(e);u=h(l,"switching"),l.forEach(m),a=h(o,"."),this.h()},h(){A(r,"href","/login"),A(e,"href","/iori/switch")},m(o,c){_(o,t,c),_(o,r,c),v(r,n),_(o,s,c),_(o,e,c),v(e,u),_(o,a,c)},p:I,d(o){o&&m(t),o&&m(r),o&&m(s),o&&m(e),o&&m(a)}}}function ue(f){let t,r,n,s,e,u;document.title=t=f[3]("header.signup");const a=[re,te],o=[];function c(l,i){return l[0]?0:1}return s=c(f),e=o[s]=a[s](f),{c(){r=U(),n=w("main"),e.c()},l(l){z('[data-svelte="svelte-5498wr"]',document.head).forEach(m),r=N(l),n=M(l,"MAIN",{});var $=E(n);e.l($),$.forEach(m)},m(l,i){_(l,r,i),_(l,n,i),o[s].m(n,null),u=!0},p(l,[i]){(!u||i&8)&&t!==(t=l[3]("header.signup"))&&(document.title=t);let $=s;s=c(l),s===$?o[s].p(l,i):(K(),b(o[$],1,1,()=>{o[$]=null}),J(),e=o[s],e?e.p(l,i):(e=o[s]=a[s](l),e.c()),y(e,1),e.m(n,null))},i(l){u||(y(e),u=!0)},o(l){b(e),u=!1},d(l){l&&m(r),l&&m(n),o[s].d()}}}function ae(f,t,r){let n,s,e,u;P(f,H,i=>r(6,n=i)),P(f,L,i=>r(7,s=i)),P(f,Z,i=>r(8,e=i)),P(f,Q,i=>r(3,u=i));let a=!1;ee(e.url.searchParams);var o;(function(i){i[i.Init=0]="Init",i[i.SignedUp=1]="SignedUp",i[i.MissingPerms=2]="MissingPerms"})(o||(o={}));let c=o.Init;async function l(){try{await V.signup(),r(2,c=o.SignedUp),r(0,a=!0)}catch(i){if(i instanceof W)console.log(i),r(2,c=o.MissingPerms);else throw i}}return D(async()=>{n==="anonymous"&&l(),s.get(n).slug!==null&&r(0,a=!0)}),[a,o,c,u,l]}class we extends O{constructor(t){super();R(this,t,ae,ue,j,{})}}export{we as default};

import{S as Qe,i as We,s as Ze,l as X,g as $,n as te,o as B,p as ne,q as A,d as g,K as Ie,e as L,c as U,a as G,b as F,t as S,h as M,J as R,E as q,w as z,x as J,y as K,B as H,k as O,m as V,j as Y,W as pt,a3 as bt,_ as ie,G as Xe,a1 as pe,a2 as wt}from"./index-471c5598.js";import{Y as xe,l as $t,a as yt}from"./api2-564f7f8d.js";import{I as Q}from"./Icon-b960e3f0.js";import{L as et}from"./Loading-28866ca5.js";import{d as Et}from"./store-669d404b.js";import{B as oe}from"./Box-a27f9004.js";import{B as vt}from"./BoxError-e4fbeeb7.js";import{A as ae}from"./util-92d9fe41.js";var me={},kt=function(){return typeof Promise=="function"&&Promise.prototype&&Promise.prototype.then},tt={},W={};let De;const Ct=[0,26,44,70,100,134,172,196,242,292,346,404,466,532,581,655,733,815,901,991,1085,1156,1258,1364,1474,1588,1706,1828,1921,2051,2185,2323,2465,2611,2761,2876,3034,3196,3362,3532,3706];W.getSymbolSize=function(e){if(!e)throw new Error('"version" cannot be null or undefined');if(e<1||e>40)throw new Error('"version" should be in range from 1 to 40');return e*4+17};W.getSymbolTotalCodewords=function(e){return Ct[e]};W.getBCHDigit=function(i){let e=0;for(;i!==0;)e++,i>>>=1;return e};W.setToSJISFunction=function(e){if(typeof e!="function")throw new Error('"toSJISFunc" is not a valid function.');De=e};W.isKanjiModeEnabled=function(){return typeof De!="undefined"};W.toSJIS=function(e){return De(e)};var $e={};(function(i){i.L={bit:1},i.M={bit:0},i.Q={bit:3},i.H={bit:2};function e(r){if(typeof r!="string")throw new Error("Param is not a string");switch(r.toLowerCase()){case"l":case"low":return i.L;case"m":case"medium":return i.M;case"q":case"quartile":return i.Q;case"h":case"high":return i.H;default:throw new Error("Unknown EC Level: "+r)}}i.isValid=function(t){return t&&typeof t.bit!="undefined"&&t.bit>=0&&t.bit<4},i.from=function(t,n){if(i.isValid(t))return t;try{return e(t)}catch{return n}}})($e);function nt(){this.buffer=[],this.length=0}nt.prototype={get:function(i){const e=Math.floor(i/8);return(this.buffer[e]>>>7-i%8&1)===1},put:function(i,e){for(let r=0;r<e;r++)this.putBit((i>>>e-r-1&1)===1)},getLengthInBits:function(){return this.length},putBit:function(i){const e=Math.floor(this.length/8);this.buffer.length<=e&&this.buffer.push(0),i&&(this.buffer[e]|=128>>>this.length%8),this.length++}};var Bt=nt;function ge(i){if(!i||i<1)throw new Error("BitMatrix size must be defined and greater than 0");this.size=i,this.data=new Uint8Array(i*i),this.reservedBit=new Uint8Array(i*i)}ge.prototype.set=function(i,e,r,t){const n=i*this.size+e;this.data[n]=r,t&&(this.reservedBit[n]=!0)};ge.prototype.get=function(i,e){return this.data[i*this.size+e]};ge.prototype.xor=function(i,e,r){this.data[i*this.size+e]^=r};ge.prototype.isReserved=function(i,e){return this.reservedBit[i*this.size+e]};var At=ge,rt={};(function(i){const e=W.getSymbolSize;i.getRowColCoords=function(t){if(t===1)return[];const n=Math.floor(t/7)+2,o=e(t),l=o===145?26:Math.ceil((o-13)/(2*n-2))*2,f=[o-7];for(let u=1;u<n-1;u++)f[u]=f[u-1]-l;return f.push(6),f.reverse()},i.getPositions=function(t){const n=[],o=i.getRowColCoords(t),l=o.length;for(let f=0;f<l;f++)for(let u=0;u<l;u++)f===0&&u===0||f===0&&u===l-1||f===l-1&&u===0||n.push([o[f],o[u]]);return n}})(rt);var ot={};const Nt=W.getSymbolSize,ze=7;ot.getPositions=function(e){const r=Nt(e);return[[0,0],[r-ze,0],[0,r-ze]]};var it={};(function(i){i.Patterns={PATTERN000:0,PATTERN001:1,PATTERN010:2,PATTERN011:3,PATTERN100:4,PATTERN101:5,PATTERN110:6,PATTERN111:7};const e={N1:3,N2:3,N3:40,N4:10};i.isValid=function(n){return n!=null&&n!==""&&!isNaN(n)&&n>=0&&n<=7},i.from=function(n){return i.isValid(n)?parseInt(n,10):void 0},i.getPenaltyN1=function(n){const o=n.size;let l=0,f=0,u=0,s=null,c=null;for(let p=0;p<o;p++){f=u=0,s=c=null;for(let d=0;d<o;d++){let a=n.get(p,d);a===s?f++:(f>=5&&(l+=e.N1+(f-5)),s=a,f=1),a=n.get(d,p),a===c?u++:(u>=5&&(l+=e.N1+(u-5)),c=a,u=1)}f>=5&&(l+=e.N1+(f-5)),u>=5&&(l+=e.N1+(u-5))}return l},i.getPenaltyN2=function(n){const o=n.size;let l=0;for(let f=0;f<o-1;f++)for(let u=0;u<o-1;u++){const s=n.get(f,u)+n.get(f,u+1)+n.get(f+1,u)+n.get(f+1,u+1);(s===4||s===0)&&l++}return l*e.N2},i.getPenaltyN3=function(n){const o=n.size;let l=0,f=0,u=0;for(let s=0;s<o;s++){f=u=0;for(let c=0;c<o;c++)f=f<<1&2047|n.get(s,c),c>=10&&(f===1488||f===93)&&l++,u=u<<1&2047|n.get(c,s),c>=10&&(u===1488||u===93)&&l++}return l*e.N3},i.getPenaltyN4=function(n){let o=0;const l=n.data.length;for(let u=0;u<l;u++)o+=n.data[u];return Math.abs(Math.ceil(o*100/l/5)-10)*e.N4};function r(t,n,o){switch(t){case i.Patterns.PATTERN000:return(n+o)%2===0;case i.Patterns.PATTERN001:return n%2===0;case i.Patterns.PATTERN010:return o%3===0;case i.Patterns.PATTERN011:return(n+o)%3===0;case i.Patterns.PATTERN100:return(Math.floor(n/2)+Math.floor(o/3))%2===0;case i.Patterns.PATTERN101:return n*o%2+n*o%3===0;case i.Patterns.PATTERN110:return(n*o%2+n*o%3)%2===0;case i.Patterns.PATTERN111:return(n*o%3+(n+o)%2)%2===0;default:throw new Error("bad maskPattern:"+t)}}i.applyMask=function(n,o){const l=o.size;for(let f=0;f<l;f++)for(let u=0;u<l;u++)o.isReserved(u,f)||o.xor(u,f,r(n,u,f))},i.getBestMask=function(n,o){const l=Object.keys(i.Patterns).length;let f=0,u=1/0;for(let s=0;s<l;s++){o(s),i.applyMask(s,n);const c=i.getPenaltyN1(n)+i.getPenaltyN2(n)+i.getPenaltyN3(n)+i.getPenaltyN4(n);i.applyMask(s,n),c<u&&(u=c,f=s)}return f}})(it);var ye={};const ee=$e,he=[1,1,1,1,1,1,1,1,1,1,2,2,1,2,2,4,1,2,4,4,2,4,4,4,2,4,6,5,2,4,6,6,2,5,8,8,4,5,8,8,4,5,8,11,4,8,10,11,4,9,12,16,4,9,16,16,6,10,12,18,6,10,17,16,6,11,16,19,6,13,18,21,7,14,21,25,8,16,20,25,8,17,23,25,9,17,23,34,9,18,25,30,10,20,27,32,12,21,29,35,12,23,34,37,12,25,34,40,13,26,35,42,14,28,38,45,15,29,40,48,16,31,43,51,17,33,45,54,18,35,48,57,19,37,51,60,19,38,53,63,20,40,56,66,21,43,59,70,22,45,62,74,24,47,65,77,25,49,68,81],_e=[7,10,13,17,10,16,22,28,15,26,36,44,20,36,52,64,26,48,72,88,36,64,96,112,40,72,108,130,48,88,132,156,60,110,160,192,72,130,192,224,80,150,224,264,96,176,260,308,104,198,288,352,120,216,320,384,132,240,360,432,144,280,408,480,168,308,448,532,180,338,504,588,196,364,546,650,224,416,600,700,224,442,644,750,252,476,690,816,270,504,750,900,300,560,810,960,312,588,870,1050,336,644,952,1110,360,700,1020,1200,390,728,1050,1260,420,784,1140,1350,450,812,1200,1440,480,868,1290,1530,510,924,1350,1620,540,980,1440,1710,570,1036,1530,1800,570,1064,1590,1890,600,1120,1680,1980,630,1204,1770,2100,660,1260,1860,2220,720,1316,1950,2310,750,1372,2040,2430];ye.getBlocksCount=function(e,r){switch(r){case ee.L:return he[(e-1)*4+0];case ee.M:return he[(e-1)*4+1];case ee.Q:return he[(e-1)*4+2];case ee.H:return he[(e-1)*4+3];default:return}};ye.getTotalCodewordsCount=function(e,r){switch(r){case ee.L:return _e[(e-1)*4+0];case ee.M:return _e[(e-1)*4+1];case ee.Q:return _e[(e-1)*4+2];case ee.H:return _e[(e-1)*4+3];default:return}};var lt={},Ee={};const ce=new Uint8Array(512),be=new Uint8Array(256);(function(){let e=1;for(let r=0;r<255;r++)ce[r]=e,be[e]=r,e<<=1,e&256&&(e^=285);for(let r=255;r<512;r++)ce[r]=ce[r-255]})();Ee.log=function(e){if(e<1)throw new Error("log("+e+")");return be[e]};Ee.exp=function(e){return ce[e]};Ee.mul=function(e,r){return e===0||r===0?0:ce[be[e]+be[r]]};(function(i){const e=Ee;i.mul=function(t,n){const o=new Uint8Array(t.length+n.length-1);for(let l=0;l<t.length;l++)for(let f=0;f<n.length;f++)o[l+f]^=e.mul(t[l],n[f]);return o},i.mod=function(t,n){let o=new Uint8Array(t);for(;o.length-n.length>=0;){const l=o[0];for(let u=0;u<n.length;u++)o[u]^=e.mul(n[u],l);let f=0;for(;f<o.length&&o[f]===0;)f++;o=o.slice(f)}return o},i.generateECPolynomial=function(t){let n=new Uint8Array([1]);for(let o=0;o<t;o++)n=i.mul(n,new Uint8Array([1,e.exp(o)]));return n}})(lt);const ut=lt;function Re(i){this.genPoly=void 0,this.degree=i,this.degree&&this.initialize(this.degree)}Re.prototype.initialize=function(e){this.degree=e,this.genPoly=ut.generateECPolynomial(this.degree)};Re.prototype.encode=function(e){if(!this.genPoly)throw new Error("Encoder not initialized");const r=new Uint8Array(e.length+this.degree);r.set(e);const t=ut.mod(r,this.genPoly),n=this.degree-t.length;if(n>0){const o=new Uint8Array(this.degree);return o.set(t,n),o}return t};var It=Re,ft={},re={},Le={};Le.isValid=function(e){return!isNaN(e)&&e>=1&&e<=40};var x={};const st="[0-9]+",Tt="[A-Z $%*+\\-./:]+";let de="(?:[u3000-u303F]|[u3040-u309F]|[u30A0-u30FF]|[uFF00-uFFEF]|[u4E00-u9FAF]|[u2605-u2606]|[u2190-u2195]|u203B|[u2010u2015u2018u2019u2025u2026u201Cu201Du2225u2260]|[u0391-u0451]|[u00A7u00A8u00B1u00B4u00D7u00F7])+";de=de.replace(/u/g,"\\u");const St="(?:(?![A-Z0-9 $%*+\\-./:]|"+de+`)(?:.|[\r
]))+`;x.KANJI=new RegExp(de,"g");x.BYTE_KANJI=new RegExp("[^A-Z0-9 $%*+\\-./:]+","g");x.BYTE=new RegExp(St,"g");x.NUMERIC=new RegExp(st,"g");x.ALPHANUMERIC=new RegExp(Tt,"g");const Mt=new RegExp("^"+de+"$"),Pt=new RegExp("^"+st+"$"),Dt=new RegExp("^[A-Z0-9 $%*+\\-./:]+$");x.testKanji=function(e){return Mt.test(e)};x.testNumeric=function(e){return Pt.test(e)};x.testAlphanumeric=function(e){return Dt.test(e)};(function(i){const e=Le,r=x;i.NUMERIC={id:"Numeric",bit:1<<0,ccBits:[10,12,14]},i.ALPHANUMERIC={id:"Alphanumeric",bit:1<<1,ccBits:[9,11,13]},i.BYTE={id:"Byte",bit:1<<2,ccBits:[8,16,16]},i.KANJI={id:"Kanji",bit:1<<3,ccBits:[8,10,12]},i.MIXED={bit:-1},i.getCharCountIndicator=function(o,l){if(!o.ccBits)throw new Error("Invalid mode: "+o);if(!e.isValid(l))throw new Error("Invalid version: "+l);return l>=1&&l<10?o.ccBits[0]:l<27?o.ccBits[1]:o.ccBits[2]},i.getBestModeForData=function(o){return r.testNumeric(o)?i.NUMERIC:r.testAlphanumeric(o)?i.ALPHANUMERIC:r.testKanji(o)?i.KANJI:i.BYTE},i.toString=function(o){if(o&&o.id)return o.id;throw new Error("Invalid mode")},i.isValid=function(o){return o&&o.bit&&o.ccBits};function t(n){if(typeof n!="string")throw new Error("Param is not a string");switch(n.toLowerCase()){case"numeric":return i.NUMERIC;case"alphanumeric":return i.ALPHANUMERIC;case"kanji":return i.KANJI;case"byte":return i.BYTE;default:throw new Error("Unknown mode: "+n)}}i.from=function(o,l){if(i.isValid(o))return o;try{return t(o)}catch{return l}}})(re);(function(i){const e=W,r=ye,t=$e,n=re,o=Le,l=1<<12|1<<11|1<<10|1<<9|1<<8|1<<5|1<<2|1<<0,f=e.getBCHDigit(l);function u(d,a,_){for(let m=1;m<=40;m++)if(a<=i.getCapacity(m,_,d))return m}function s(d,a){return n.getCharCountIndicator(d,a)+4}function c(d,a){let _=0;return d.forEach(function(m){_+=s(m.mode,a)+m.getBitsLength()}),_}function p(d,a){for(let _=1;_<=40;_++)if(c(d,_)<=i.getCapacity(_,a,n.MIXED))return _}i.from=function(a,_){return o.isValid(a)?parseInt(a,10):_},i.getCapacity=function(a,_,m){if(!o.isValid(a))throw new Error("Invalid QR Code version");typeof m=="undefined"&&(m=n.BYTE);const v=e.getSymbolTotalCodewords(a),b=r.getTotalCodewordsCount(a,_),k=(v-b)*8;if(m===n.MIXED)return k;const E=k-s(m,a);switch(m){case n.NUMERIC:return Math.floor(E/10*3);case n.ALPHANUMERIC:return Math.floor(E/11*2);case n.KANJI:return Math.floor(E/13);case n.BYTE:default:return Math.floor(E/8)}},i.getBestVersionForData=function(a,_){let m;const v=t.from(_,t.M);if(Array.isArray(a)){if(a.length>1)return p(a,v);if(a.length===0)return 1;m=a[0]}else m=a;return u(m.mode,m.getLength(),v)},i.getEncodedBits=function(a){if(!o.isValid(a)||a<7)throw new Error("Invalid QR Code version");let _=a<<12;for(;e.getBCHDigit(_)-f>=0;)_^=l<<e.getBCHDigit(_)-f;return a<<12|_}})(ft);var at={};const Te=W,ct=1<<10|1<<8|1<<5|1<<4|1<<2|1<<1|1<<0,Rt=1<<14|1<<12|1<<10|1<<4|1<<1,Je=Te.getBCHDigit(ct);at.getEncodedBits=function(e,r){const t=e.bit<<3|r;let n=t<<10;for(;Te.getBCHDigit(n)-Je>=0;)n^=ct<<Te.getBCHDigit(n)-Je;return(t<<10|n)^Rt};var dt={};const Lt=re;function le(i){this.mode=Lt.NUMERIC,this.data=i.toString()}le.getBitsLength=function(e){return 10*Math.floor(e/3)+(e%3?e%3*3+1:0)};le.prototype.getLength=function(){return this.data.length};le.prototype.getBitsLength=function(){return le.getBitsLength(this.data.length)};le.prototype.write=function(e){let r,t,n;for(r=0;r+3<=this.data.length;r+=3)t=this.data.substr(r,3),n=parseInt(t,10),e.put(n,10);const o=this.data.length-r;o>0&&(t=this.data.substr(r),n=parseInt(t,10),e.put(n,o*3+1))};var Ut=le;const Ft=re,ke=["0","1","2","3","4","5","6","7","8","9","A","B","C","D","E","F","G","H","I","J","K","L","M","N","O","P","Q","R","S","T","U","V","W","X","Y","Z"," ","$","%","*","+","-",".","/",":"];function ue(i){this.mode=Ft.ALPHANUMERIC,this.data=i}ue.getBitsLength=function(e){return 11*Math.floor(e/2)+6*(e%2)};ue.prototype.getLength=function(){return this.data.length};ue.prototype.getBitsLength=function(){return ue.getBitsLength(this.data.length)};ue.prototype.write=function(e){let r;for(r=0;r+2<=this.data.length;r+=2){let t=ke.indexOf(this.data[r])*45;t+=ke.indexOf(this.data[r+1]),e.put(t,11)}this.data.length%2&&e.put(ke.indexOf(this.data[r]),6)};var Ot=ue,Vt=function(e){for(var r=[],t=e.length,n=0;n<t;n++){var o=e.charCodeAt(n);if(o>=55296&&o<=56319&&t>n+1){var l=e.charCodeAt(n+1);l>=56320&&l<=57343&&(o=(o-55296)*1024+l-56320+65536,n+=1)}if(o<128){r.push(o);continue}if(o<2048){r.push(o>>6|192),r.push(o&63|128);continue}if(o<55296||o>=57344&&o<65536){r.push(o>>12|224),r.push(o>>6&63|128),r.push(o&63|128);continue}if(o>=65536&&o<=1114111){r.push(o>>18|240),r.push(o>>12&63|128),r.push(o>>6&63|128),r.push(o&63|128);continue}r.push(239,191,189)}return new Uint8Array(r).buffer};const zt=Vt,Jt=re;function fe(i){this.mode=Jt.BYTE,this.data=new Uint8Array(zt(i))}fe.getBitsLength=function(e){return e*8};fe.prototype.getLength=function(){return this.data.length};fe.prototype.getBitsLength=function(){return fe.getBitsLength(this.data.length)};fe.prototype.write=function(i){for(let e=0,r=this.data.length;e<r;e++)i.put(this.data[e],8)};var Kt=fe;const Ht=re,Yt=W;function se(i){this.mode=Ht.KANJI,this.data=i}se.getBitsLength=function(e){return e*13};se.prototype.getLength=function(){return this.data.length};se.prototype.getBitsLength=function(){return se.getBitsLength(this.data.length)};se.prototype.write=function(i){let e;for(e=0;e<this.data.length;e++){let r=Yt.toSJIS(this.data[e]);if(r>=33088&&r<=40956)r-=33088;else if(r>=57408&&r<=60351)r-=49472;else throw new Error("Invalid SJIS character: "+this.data[e]+`
Make sure your charset is UTF-8`);r=(r>>>8&255)*192+(r&255),i.put(r,13)}};var jt=se,mt={exports:{}};(function(i){var e={single_source_shortest_paths:function(r,t,n){var o={},l={};l[t]=0;var f=e.PriorityQueue.make();f.push(t,0);for(var u,s,c,p,d,a,_,m,v;!f.empty();){u=f.pop(),s=u.value,p=u.cost,d=r[s]||{};for(c in d)d.hasOwnProperty(c)&&(a=d[c],_=p+a,m=l[c],v=typeof l[c]=="undefined",(v||m>_)&&(l[c]=_,f.push(c,_),o[c]=s))}if(typeof n!="undefined"&&typeof l[n]=="undefined"){var b=["Could not find a path from ",t," to ",n,"."].join("");throw new Error(b)}return o},extract_shortest_path_from_predecessor_list:function(r,t){for(var n=[],o=t;o;)n.push(o),o=r[o];return n.reverse(),n},find_path:function(r,t,n){var o=e.single_source_shortest_paths(r,t,n);return e.extract_shortest_path_from_predecessor_list(o,n)},PriorityQueue:{make:function(r){var t=e.PriorityQueue,n={},o;r=r||{};for(o in t)t.hasOwnProperty(o)&&(n[o]=t[o]);return n.queue=[],n.sorter=r.sorter||t.default_sorter,n},default_sorter:function(r,t){return r.cost-t.cost},push:function(r,t){var n={value:r,cost:t};this.queue.push(n),this.queue.sort(this.sorter)},pop:function(){return this.queue.shift()},empty:function(){return this.queue.length===0}}};i.exports=e})(mt);(function(i){const e=re,r=Ut,t=Ot,n=Kt,o=jt,l=x,f=W,u=mt.exports;function s(b){return unescape(encodeURIComponent(b)).length}function c(b,k,E){const w=[];let P;for(;(P=b.exec(E))!==null;)w.push({data:P[0],index:P.index,mode:k,length:P[0].length});return w}function p(b){const k=c(l.NUMERIC,e.NUMERIC,b),E=c(l.ALPHANUMERIC,e.ALPHANUMERIC,b);let w,P;return f.isKanjiModeEnabled()?(w=c(l.BYTE,e.BYTE,b),P=c(l.KANJI,e.KANJI,b)):(w=c(l.BYTE_KANJI,e.BYTE,b),P=[]),k.concat(E,w,P).sort(function(D,C){return D.index-C.index}).map(function(D){return{data:D.data,mode:D.mode,length:D.length}})}function d(b,k){switch(k){case e.NUMERIC:return r.getBitsLength(b);case e.ALPHANUMERIC:return t.getBitsLength(b);case e.KANJI:return o.getBitsLength(b);case e.BYTE:return n.getBitsLength(b)}}function a(b){return b.reduce(function(k,E){const w=k.length-1>=0?k[k.length-1]:null;return w&&w.mode===E.mode?(k[k.length-1].data+=E.data,k):(k.push(E),k)},[])}function _(b){const k=[];for(let E=0;E<b.length;E++){const w=b[E];switch(w.mode){case e.NUMERIC:k.push([w,{data:w.data,mode:e.ALPHANUMERIC,length:w.length},{data:w.data,mode:e.BYTE,length:w.length}]);break;case e.ALPHANUMERIC:k.push([w,{data:w.data,mode:e.BYTE,length:w.length}]);break;case e.KANJI:k.push([w,{data:w.data,mode:e.BYTE,length:s(w.data)}]);break;case e.BYTE:k.push([{data:w.data,mode:e.BYTE,length:s(w.data)}])}}return k}function m(b,k){const E={},w={start:{}};let P=["start"];for(let N=0;N<b.length;N++){const D=b[N],C=[];for(let y=0;y<D.length;y++){const h=D[y],I=""+N+y;C.push(I),E[I]={node:h,lastCount:0},w[I]={};for(let j=0;j<P.length;j++){const T=P[j];E[T]&&E[T].node.mode===h.mode?(w[T][I]=d(E[T].lastCount+h.length,h.mode)-d(E[T].lastCount,h.mode),E[T].lastCount+=h.length):(E[T]&&(E[T].lastCount=h.length),w[T][I]=d(h.length,h.mode)+4+e.getCharCountIndicator(h.mode,k))}}P=C}for(let N=0;N<P.length;N++)w[P[N]].end=0;return{map:w,table:E}}function v(b,k){let E;const w=e.getBestModeForData(b);if(E=e.from(k,w),E!==e.BYTE&&E.bit<w.bit)throw new Error('"'+b+'" cannot be encoded with mode '+e.toString(E)+`.
 Suggested mode is: `+e.toString(w));switch(E===e.KANJI&&!f.isKanjiModeEnabled()&&(E=e.BYTE),E){case e.NUMERIC:return new r(b);case e.ALPHANUMERIC:return new t(b);case e.KANJI:return new o(b);case e.BYTE:return new n(b)}}i.fromArray=function(k){return k.reduce(function(E,w){return typeof w=="string"?E.push(v(w,null)):w.data&&E.push(v(w.data,w.mode)),E},[])},i.fromString=function(k,E){const w=p(k,f.isKanjiModeEnabled()),P=_(w),N=m(P,E),D=u.find_path(N.map,"start","end"),C=[];for(let y=1;y<D.length-1;y++)C.push(N.table[D[y]].node);return i.fromArray(a(C))},i.rawSplit=function(k){return i.fromArray(p(k,f.isKanjiModeEnabled()))}})(dt);const ve=W,Ce=$e,Gt=Bt,qt=At,Qt=rt,Wt=ot,Se=it,Me=ye,Zt=It,we=ft,Xt=at,xt=re,Be=dt;function en(i,e){const r=i.size,t=Wt.getPositions(e);for(let n=0;n<t.length;n++){const o=t[n][0],l=t[n][1];for(let f=-1;f<=7;f++)if(!(o+f<=-1||r<=o+f))for(let u=-1;u<=7;u++)l+u<=-1||r<=l+u||(f>=0&&f<=6&&(u===0||u===6)||u>=0&&u<=6&&(f===0||f===6)||f>=2&&f<=4&&u>=2&&u<=4?i.set(o+f,l+u,!0,!0):i.set(o+f,l+u,!1,!0))}}function tn(i){const e=i.size;for(let r=8;r<e-8;r++){const t=r%2===0;i.set(r,6,t,!0),i.set(6,r,t,!0)}}function nn(i,e){const r=Qt.getPositions(e);for(let t=0;t<r.length;t++){const n=r[t][0],o=r[t][1];for(let l=-2;l<=2;l++)for(let f=-2;f<=2;f++)l===-2||l===2||f===-2||f===2||l===0&&f===0?i.set(n+l,o+f,!0,!0):i.set(n+l,o+f,!1,!0)}}function rn(i,e){const r=i.size,t=we.getEncodedBits(e);let n,o,l;for(let f=0;f<18;f++)n=Math.floor(f/3),o=f%3+r-8-3,l=(t>>f&1)===1,i.set(n,o,l,!0),i.set(o,n,l,!0)}function Ae(i,e,r){const t=i.size,n=Xt.getEncodedBits(e,r);let o,l;for(o=0;o<15;o++)l=(n>>o&1)===1,o<6?i.set(o,8,l,!0):o<8?i.set(o+1,8,l,!0):i.set(t-15+o,8,l,!0),o<8?i.set(8,t-o-1,l,!0):o<9?i.set(8,15-o-1+1,l,!0):i.set(8,15-o-1,l,!0);i.set(t-8,8,1,!0)}function on(i,e){const r=i.size;let t=-1,n=r-1,o=7,l=0;for(let f=r-1;f>0;f-=2)for(f===6&&f--;;){for(let u=0;u<2;u++)if(!i.isReserved(n,f-u)){let s=!1;l<e.length&&(s=(e[l]>>>o&1)===1),i.set(n,f-u,s),o--,o===-1&&(l++,o=7)}if(n+=t,n<0||r<=n){n-=t,t=-t;break}}}function ln(i,e,r){const t=new Gt;r.forEach(function(u){t.put(u.mode.bit,4),t.put(u.getLength(),xt.getCharCountIndicator(u.mode,i)),u.write(t)});const n=ve.getSymbolTotalCodewords(i),o=Me.getTotalCodewordsCount(i,e),l=(n-o)*8;for(t.getLengthInBits()+4<=l&&t.put(0,4);t.getLengthInBits()%8!==0;)t.putBit(0);const f=(l-t.getLengthInBits())/8;for(let u=0;u<f;u++)t.put(u%2?17:236,8);return un(t,i,e)}function un(i,e,r){const t=ve.getSymbolTotalCodewords(e),n=Me.getTotalCodewordsCount(e,r),o=t-n,l=Me.getBlocksCount(e,r),f=t%l,u=l-f,s=Math.floor(t/l),c=Math.floor(o/l),p=c+1,d=s-c,a=new Zt(d);let _=0;const m=new Array(l),v=new Array(l);let b=0;const k=new Uint8Array(i.buffer);for(let D=0;D<l;D++){const C=D<u?c:p;m[D]=k.slice(_,_+C),v[D]=a.encode(m[D]),_+=C,b=Math.max(b,C)}const E=new Uint8Array(t);let w=0,P,N;for(P=0;P<b;P++)for(N=0;N<l;N++)P<m[N].length&&(E[w++]=m[N][P]);for(P=0;P<d;P++)for(N=0;N<l;N++)E[w++]=v[N][P];return E}function fn(i,e,r,t){let n;if(Array.isArray(i))n=Be.fromArray(i);else if(typeof i=="string"){let s=e;if(!s){const c=Be.rawSplit(i);s=we.getBestVersionForData(c,r)}n=Be.fromString(i,s||40)}else throw new Error("Invalid data");const o=we.getBestVersionForData(n,r);if(!o)throw new Error("The amount of data is too big to be stored in a QR Code");if(!e)e=o;else if(e<o)throw new Error(`
The chosen QR Code version cannot contain this amount of data.
Minimum version required to store current data is: `+o+`.
`);const l=ln(e,r,n),f=ve.getSymbolSize(e),u=new qt(f);return en(u,e),tn(u),nn(u,e),Ae(u,r,0),e>=7&&rn(u,e),on(u,l),isNaN(t)&&(t=Se.getBestMask(u,Ae.bind(null,u,r))),Se.applyMask(t,u),Ae(u,r,t),{modules:u,version:e,errorCorrectionLevel:r,maskPattern:t,segments:n}}tt.create=function(e,r){if(typeof e=="undefined"||e==="")throw new Error("No input text");let t=Ce.M,n,o;return typeof r!="undefined"&&(t=Ce.from(r.errorCorrectionLevel,Ce.M),n=we.from(r.version),o=Se.from(r.maskPattern),r.toSJISFunc&&ve.setToSJISFunction(r.toSJISFunc)),fn(e,n,t,o)};var gt={},Ue={};(function(i){function e(r){if(typeof r=="number"&&(r=r.toString()),typeof r!="string")throw new Error("Color should be defined as hex string");let t=r.slice().replace("#","").split("");if(t.length<3||t.length===5||t.length>8)throw new Error("Invalid hex color: "+r);(t.length===3||t.length===4)&&(t=Array.prototype.concat.apply([],t.map(function(o){return[o,o]}))),t.length===6&&t.push("F","F");const n=parseInt(t.join(""),16);return{r:n>>24&255,g:n>>16&255,b:n>>8&255,a:n&255,hex:"#"+t.slice(0,6).join("")}}i.getOptions=function(t){t||(t={}),t.color||(t.color={});const n=typeof t.margin=="undefined"||t.margin===null||t.margin<0?4:t.margin,o=t.width&&t.width>=21?t.width:void 0,l=t.scale||4;return{width:o,scale:o?4:l,margin:n,color:{dark:e(t.color.dark||"#000000ff"),light:e(t.color.light||"#ffffffff")},type:t.type,rendererOpts:t.rendererOpts||{}}},i.getScale=function(t,n){return n.width&&n.width>=t+n.margin*2?n.width/(t+n.margin*2):n.scale},i.getImageWidth=function(t,n){const o=i.getScale(t,n);return Math.floor((t+n.margin*2)*o)},i.qrToImageData=function(t,n,o){const l=n.modules.size,f=n.modules.data,u=i.getScale(l,o),s=Math.floor((l+o.margin*2)*u),c=o.margin*u,p=[o.color.light,o.color.dark];for(let d=0;d<s;d++)for(let a=0;a<s;a++){let _=(d*s+a)*4,m=o.color.light;if(d>=c&&a>=c&&d<s-c&&a<s-c){const v=Math.floor((d-c)/u),b=Math.floor((a-c)/u);m=p[f[v*l+b]?1:0]}t[_++]=m.r,t[_++]=m.g,t[_++]=m.b,t[_]=m.a}}})(Ue);(function(i){const e=Ue;function r(n,o,l){n.clearRect(0,0,o.width,o.height),o.style||(o.style={}),o.height=l,o.width=l,o.style.height=l+"px",o.style.width=l+"px"}function t(){try{return document.createElement("canvas")}catch{throw new Error("You need to specify a canvas element")}}i.render=function(o,l,f){let u=f,s=l;typeof u=="undefined"&&(!l||!l.getContext)&&(u=l,l=void 0),l||(s=t()),u=e.getOptions(u);const c=e.getImageWidth(o.modules.size,u),p=s.getContext("2d"),d=p.createImageData(c,c);return e.qrToImageData(d.data,o,u),r(p,s,c),p.putImageData(d,0,0),s},i.renderToDataURL=function(o,l,f){let u=f;typeof u=="undefined"&&(!l||!l.getContext)&&(u=l,l=void 0),u||(u={});const s=i.render(o,l,u),c=u.type||"image/png",p=u.rendererOpts||{};return s.toDataURL(c,p.quality)}})(gt);var ht={};const sn=Ue;function Ke(i,e){const r=i.a/255,t=e+'="'+i.hex+'"';return r<1?t+" "+e+'-opacity="'+r.toFixed(2).slice(1)+'"':t}function Ne(i,e,r){let t=i+e;return typeof r!="undefined"&&(t+=" "+r),t}function an(i,e,r){let t="",n=0,o=!1,l=0;for(let f=0;f<i.length;f++){const u=Math.floor(f%e),s=Math.floor(f/e);!u&&!o&&(o=!0),i[f]?(l++,f>0&&u>0&&i[f-1]||(t+=o?Ne("M",u+r,.5+s+r):Ne("m",n,0),n=0,o=!1),u+1<e&&i[f+1]||(t+=Ne("h",l),l=0)):n++}return t}ht.render=function(e,r,t){const n=sn.getOptions(r),o=e.modules.size,l=e.modules.data,f=o+n.margin*2,u=n.color.light.a?"<path "+Ke(n.color.light,"fill")+' d="M0 0h'+f+"v"+f+'H0z"/>':"",s="<path "+Ke(n.color.dark,"stroke")+' d="'+an(l,o,n.margin)+'"/>',c='viewBox="0 0 '+f+" "+f+'"',p=n.width?'width="'+n.width+'" height="'+n.width+'" ':"",d='<svg xmlns="http://www.w3.org/2000/svg" '+p+c+' shape-rendering="crispEdges">'+u+s+`</svg>
`;return typeof t=="function"&&t(null,d),d};const cn=kt,Pe=tt,_t=gt,dn=ht;function Fe(i,e,r,t,n){const o=[].slice.call(arguments,1),l=o.length,f=typeof o[l-1]=="function";if(!f&&!cn())throw new Error("Callback required as last argument");if(f){if(l<2)throw new Error("Too few arguments provided");l===2?(n=r,r=e,e=t=void 0):l===3&&(e.getContext&&typeof n=="undefined"?(n=t,t=void 0):(n=t,t=r,r=e,e=void 0))}else{if(l<1)throw new Error("Too few arguments provided");return l===1?(r=e,e=t=void 0):l===2&&!e.getContext&&(t=r,r=e,e=void 0),new Promise(function(u,s){try{const c=Pe.create(r,t);u(i(c,e,t))}catch(c){s(c)}})}try{const u=Pe.create(r,t);n(null,i(u,e,t))}catch(u){n(u)}}me.create=Pe.create;me.toCanvas=Fe.bind(null,_t.render);me.toDataURL=Fe.bind(null,_t.renderToDataURL);me.toString=Fe.bind(null,function(i,e,r){return dn.render(i,r)});function mn(i){let e,r,t,n;const o=[Bn,Cn,kn,vn,En,yn,$n,wn,bn,pn,_n,hn],l=[];function f(u,s){return u[0]==="pw"?0:u[0]==="otp_totp"?1:u[0]==="webauthn"?2:u[0]==="limited"?3:u[0]==="remote"?4:u[0]==="ctrl_email"&&u[2]?5:u[0]==="ctrl_tel"&&u[2]?6:u[0]==="ctrl_pubkey"&&u[2]?7:u[0]==="ctrl_dns"&&u[2]?8:u[0]==="ctrl_oidc"&&u[2]?9:u[0]==="ctrl_ldap"&&u[2]?10:11}return r=f(i),t=l[r]=o[r](i),{c(){e=L("a"),t.c(),this.h()},l(u){e=U(u,"A",{href:!0,class:!0});var s=G(e);t.l(s),s.forEach(g),this.h()},h(){F(e,"href",i[3]),F(e,"class","svelte-2t2e1b")},m(u,s){$(u,e,s),l[r].m(e,null),n=!0},p(u,s){let c=r;r=f(u),r===c?l[r].p(u,s):(te(),B(l[c],1,1,()=>{l[c]=null}),ne(),t=l[r],t?t.p(u,s):(t=l[r]=o[r](u),t.c()),A(t,1),t.m(e,null))},i(u){n||(A(t),n=!0)},o(u){B(t),n=!1},d(u){u&&g(e),l[r].d()}}}function gn(i){let e,r;return{c(){e=L("em"),r=S("Not Set")},l(t){e=U(t,"EM",{});var n=G(e);r=M(n,"Not Set"),n.forEach(g)},m(t,n){$(t,e,n),R(e,r)},p:q,i:q,o:q,d(t){t&&g(e)}}}function hn(i){let e,r;return e=new oe({props:{level:"error",$$slots:{default:[An]},$$scope:{ctx:i}}}),{c(){z(e.$$.fragment)},l(t){J(e.$$.fragment,t)},m(t,n){K(e,t,n),r=!0},p(t,n){const o={};n&21&&(o.$$scope={dirty:n,ctx:t}),e.$set(o)},i(t){r||(A(e.$$.fragment,t),r=!0)},o(t){B(e.$$.fragment,t),r=!1},d(t){H(e,t)}}}function _n(i){let e,r,t;return e=new Q({props:{icon:"mdi:folder-account"}}),{c(){z(e.$$.fragment),r=S(`
			Control of LDAP user (TODO)`)},l(n){J(e.$$.fragment,n),r=M(n,`
			Control of LDAP user (TODO)`)},m(n,o){K(e,n,o),$(n,r,o),t=!0},p:q,i(n){t||(A(e.$$.fragment,n),t=!0)},o(n){B(e.$$.fragment,n),t=!1},d(n){H(e,n),n&&g(r)}}}function pn(i){let e,r,t;return e=new Q({props:{icon:"mdi:openid"}}),{c(){z(e.$$.fragment),r=S(`
			Control of OpenID Connect End-User (TODO)`)},l(n){J(e.$$.fragment,n),r=M(n,`
			Control of OpenID Connect End-User (TODO)`)},m(n,o){K(e,n,o),$(n,r,o),t=!0},p:q,i(n){t||(A(e.$$.fragment,n),t=!0)},o(n){B(e.$$.fragment,n),t=!1},d(n){H(e,n),n&&g(r)}}}function bn(i){let e,r,t;return e=new Q({props:{icon:"mdi:dns-outline"}}),{c(){z(e.$$.fragment),r=S(`
			Control of DNS Authority (TODO)`)},l(n){J(e.$$.fragment,n),r=M(n,`
			Control of DNS Authority (TODO)`)},m(n,o){K(e,n,o),$(n,r,o),t=!0},p:q,i(n){t||(A(e.$$.fragment,n),t=!0)},o(n){B(e.$$.fragment,n),t=!1},d(n){H(e,n),n&&g(r)}}}function wn(i){let e,r,t;return e=new Q({props:{icon:"mdi:key"}}),{c(){z(e.$$.fragment),r=S(`
			Control of Private Key (TODO)`)},l(n){J(e.$$.fragment,n),r=M(n,`
			Control of Private Key (TODO)`)},m(n,o){K(e,n,o),$(n,r,o),t=!0},p:q,i(n){t||(A(e.$$.fragment,n),t=!0)},o(n){B(e.$$.fragment,n),t=!1},d(n){H(e,n),n&&g(r)}}}function $n(i){let e,r,t;return e=new Q({props:{icon:"mdi:phone"}}),{c(){z(e.$$.fragment),r=S(`
			Control of Telephone (TODO)`)},l(n){J(e.$$.fragment,n),r=M(n,`
			Control of Telephone (TODO)`)},m(n,o){K(e,n,o),$(n,r,o),t=!0},p:q,i(n){t||(A(e.$$.fragment,n),t=!0)},o(n){B(e.$$.fragment,n),t=!1},d(n){H(e,n),n&&g(r)}}}function yn(i){let e,r,t;return e=new Q({props:{icon:"mdi:at"}}),{c(){z(e.$$.fragment),r=S(`
			Control of Email Address (TODO)`)},l(n){J(e.$$.fragment,n),r=M(n,`
			Control of Email Address (TODO)`)},m(n,o){K(e,n,o),$(n,r,o),t=!0},p:q,i(n){t||(A(e.$$.fragment,n),t=!0)},o(n){B(e.$$.fragment,n),t=!1},d(n){H(e,n),n&&g(r)}}}function En(i){let e,r,t=i[1]("af.remote.label")+"",n,o;return e=new Q({props:{icon:"mdi:devices"}}),{c(){z(e.$$.fragment),r=O(),n=S(t)},l(l){J(e.$$.fragment,l),r=V(l),n=M(l,t)},m(l,f){K(e,l,f),$(l,r,f),$(l,n,f),o=!0},p(l,f){(!o||f&2)&&t!==(t=l[1]("af.remote.label")+"")&&Y(n,t)},i(l){o||(A(e.$$.fragment,l),o=!0)},o(l){B(e.$$.fragment,l),o=!1},d(l){H(e,l),l&&g(r),l&&g(n)}}}function vn(i){let e,r,t=i[1]("af.limited.label")+"",n,o;return e=new Q({props:{icon:"mdi:timer-outline"}}),{c(){z(e.$$.fragment),r=O(),n=S(t)},l(l){J(e.$$.fragment,l),r=V(l),n=M(l,t)},m(l,f){K(e,l,f),$(l,r,f),$(l,n,f),o=!0},p(l,f){(!o||f&2)&&t!==(t=l[1]("af.limited.label")+"")&&Y(n,t)},i(l){o||(A(e.$$.fragment,l),o=!0)},o(l){B(e.$$.fragment,l),o=!1},d(l){H(e,l),l&&g(r),l&&g(n)}}}function kn(i){let e,r,t=i[1]("af.webauthn.label")+"",n;return{c(){e=L("icon"),r=O(),n=S(t),this.h()},l(o){e=U(o,"ICON",{icon:!0}),G(e).forEach(g),r=V(o),n=M(o,t),this.h()},h(){F(e,"icon","mdi:key")},m(o,l){$(o,e,l),$(o,r,l),$(o,n,l)},p(o,l){l&2&&t!==(t=o[1]("af.webauthn.label")+"")&&Y(n,t)},i:q,o:q,d(o){o&&g(e),o&&g(r),o&&g(n)}}}function Cn(i){let e,r,t=i[1]("af.otp_totp.label")+"",n,o;return e=new Q({props:{icon:"mdi:clock-outline"}}),{c(){z(e.$$.fragment),r=O(),n=S(t)},l(l){J(e.$$.fragment,l),r=V(l),n=M(l,t)},m(l,f){K(e,l,f),$(l,r,f),$(l,n,f),o=!0},p(l,f){(!o||f&2)&&t!==(t=l[1]("af.otp_totp.label")+"")&&Y(n,t)},i(l){o||(A(e.$$.fragment,l),o=!0)},o(l){B(e.$$.fragment,l),o=!1},d(l){H(e,l),l&&g(r),l&&g(n)}}}function Bn(i){let e,r,t=i[1]("af.pw.label")+"",n,o;return e=new Q({props:{icon:"mdi:dialpad"}}),{c(){z(e.$$.fragment),r=O(),n=S(t)},l(l){J(e.$$.fragment,l),r=V(l),n=M(l,t)},m(l,f){K(e,l,f),$(l,r,f),$(l,n,f),o=!0},p(l,f){(!o||f&2)&&t!==(t=l[1]("af.pw.label")+"")&&Y(n,t)},i(l){o||(A(e.$$.fragment,l),o=!0)},o(l){B(e.$$.fragment,l),o=!1},d(l){H(e,l),l&&g(r),l&&g(n)}}}function He(i){let e,r;return{c(){e=L("code"),r=S(i[0])},l(t){e=U(t,"CODE",{});var n=G(e);r=M(n,i[0]),n.forEach(g)},m(t,n){$(t,e,n),R(e,r)},p(t,n){n&1&&Y(r,t[0])},d(t){t&&g(e)}}}function An(i){let e,r,t=i[2]&&He(i);return{c(){e=S(`Unknown verifier
				`),t&&t.c(),r=X()},l(n){e=M(n,`Unknown verifier
				`),t&&t.l(n),r=X()},m(n,o){$(n,e,o),t&&t.m(n,o),$(n,r,o)},p(n,o){n[2]?t?t.p(n,o):(t=He(n),t.c(),t.m(r.parentNode,r)):t&&(t.d(1),t=null)},d(n){n&&g(e),t&&t.d(n),n&&g(r)}}}function Nn(i){let e,r,t,n;const o=[gn,mn],l=[];function f(u,s){return u[0]===null?0:1}return e=f(i),r=l[e]=o[e](i),{c(){r.c(),t=X()},l(u){r.l(u),t=X()},m(u,s){l[e].m(u,s),$(u,t,s),n=!0},p(u,[s]){let c=e;e=f(u),e===c?l[e].p(u,s):(te(),B(l[c],1,1,()=>{l[c]=null}),ne(),r=l[e],r?r.p(u,s):(r=l[e]=o[e](u),r.c()),A(r,1),r.m(t.parentNode,t))},i(u){n||(A(r),n=!0)},o(u){B(r),n=!1},d(u){l[e].d(u),u&&g(t)}}}function In(i){return new URL(`/authn/afs/${encodeURI(i)}.html`,"https://kyii.nyiyui.ca")}function Tn(i,e,r){let t,n;Ie(i,xe,f=>r(1,t=f)),Ie(i,Et,f=>r(2,n=f));let{verifier:o}=e;const l=In(o).toString();return i.$$set=f=>{"verifier"in f&&r(0,o=f.verifier)},[o,t,n,l]}class Sn extends Qe{constructor(e){super();We(this,e,Tn,Nn,Ze,{verifier:0})}}function Ye(i,e,r){const t=i.slice();return t[21]=e[r],t}function Mn(i){let e,r,t,n,o,l,f,u,s,c,p;const d=[Fn,Un],a=[];function _(m,v){return m[4]?1:0}return e=_(i),r=a[e]=d[e](i),{c(){r.c(),t=O(),n=L("input"),l=O(),f=L("input"),this.h()},l(m){r.l(m),t=V(m),n=U(m,"INPUT",{type:!0}),l=V(m),f=U(m,"INPUT",{type:!0}),this.h()},h(){F(n,"type","button"),n.value=o=i[8]("af.remote.resend"),n.disabled=i[5],F(f,"type","button"),f.value=u=i[8]("af.remote.submit"),f.disabled=i[5]},m(m,v){a[e].m(m,v),$(m,t,v),$(m,n,v),$(m,l,v),$(m,f,v),s=!0,c||(p=[ie(n,"click",i[10]),ie(f,"click",i[11])],c=!0)},p(m,v){let b=e;e=_(m),e===b?a[e].p(m,v):(te(),B(a[b],1,1,()=>{a[b]=null}),ne(),r=a[e],r?r.p(m,v):(r=a[e]=d[e](m),r.c()),A(r,1),r.m(t.parentNode,t)),(!s||v&256&&o!==(o=m[8]("af.remote.resend")))&&(n.value=o),(!s||v&32)&&(n.disabled=m[5]),(!s||v&256&&u!==(u=m[8]("af.remote.submit")))&&(f.value=u),(!s||v&32)&&(f.disabled=m[5])},i(m){s||(A(r),s=!0)},o(m){B(r),s=!1},d(m){a[e].d(m),m&&g(t),m&&g(n),m&&g(l),m&&g(f),c=!1,Xe(p)}}}function Pn(i){let e,r,t,n;return{c(){e=L("input"),this.h()},l(o){e=U(o,"INPUT",{type:!0}),this.h()},h(){F(e,"type","button"),e.value=r=i[8]("af.submit"),e.disabled=i[5]},m(o,l){$(o,e,l),t||(n=ie(e,"click",i[9]),t=!0)},p(o,l){l&256&&r!==(r=o[8]("af.submit"))&&(e.value=r),l&32&&(e.disabled=o[5])},i:q,o:q,d(o){o&&g(e),t=!1,n()}}}function Dn(i){let e,r;return e=new et({}),{c(){z(e.$$.fragment)},l(t){J(e.$$.fragment,t)},m(t,n){K(e,t,n),r=!0},p:q,i(t){r||(A(e.$$.fragment,t),r=!0)},o(t){B(e.$$.fragment,t),r=!1},d(t){H(e,t)}}}function Rn(i){let e,r=i[8]("af.otp_totp.label")+"",t,n,o,l,f,u;return{c(){e=L("label"),t=S(r),n=O(),o=L("input"),this.h()},l(s){e=U(s,"LABEL",{id:!0,class:!0});var c=G(e);t=M(c,r),n=V(c),o=U(c,"INPUT",{type:!0,inputmode:!0,autocomplete:!0,pattern:!0}),c.forEach(g),this.h()},h(){F(o,"type","text"),F(o,"inputmode","numeric"),F(o,"autocomplete","one-time-code"),F(o,"pattern","[0-9]{6,8}"),o.disabled=i[5],F(e,"id",l=i[2].uuid),F(e,"class","af")},m(s,c){$(s,e,c),R(e,t),R(e,n),R(e,o),pe(o,i[0]),f||(u=ie(o,"input",i[15]),f=!0)},p(s,c){c&256&&r!==(r=s[8]("af.otp_totp.label")+"")&&Y(t,r),c&32&&(o.disabled=s[5]),c&1&&o.value!==s[0]&&pe(o,s[0]),c&4&&l!==(l=s[2].uuid)&&F(e,"id",l)},i:q,o:q,d(s){s&&g(e),f=!1,u()}}}function Ln(i){let e,r=i[8]("af.pw.pw")+"",t,n,o,l,f,u,s,c,p,d;return{c(){e=L("label"),t=S(r),n=O(),o=L("input"),f=O(),u=L("input"),this.h()},l(a){e=U(a,"LABEL",{id:!0,class:!0});var _=G(e);t=M(_,r),n=V(_),o=U(_,"INPUT",{type:!0,autocomplete:!0}),_.forEach(g),f=V(a),u=U(a,"INPUT",{type:!0}),this.h()},h(){F(o,"type","password"),F(o,"autocomplete","current-password"),F(e,"id",l=i[2].uuid),F(e,"class","af"),F(u,"type","button"),u.value=s=i[8]("af.submit"),u.disabled=c=!i[0]||i[5]},m(a,_){$(a,e,_),R(e,t),R(e,n),R(e,o),pe(o,i[0]),$(a,f,_),$(a,u,_),p||(d=[ie(o,"input",i[13]),ie(u,"click",i[14])],p=!0)},p(a,_){_&256&&r!==(r=a[8]("af.pw.pw")+"")&&Y(t,r),_&1&&o.value!==a[0]&&pe(o,a[0]),_&4&&l!==(l=a[2].uuid)&&F(e,"id",l),_&256&&s!==(s=a[8]("af.submit"))&&(u.value=s),_&33&&c!==(c=!a[0]||a[5])&&(u.disabled=c)},i:q,o:q,d(a){a&&g(e),a&&g(f),a&&g(u),p=!1,Xe(d)}}}function Un(i){let e,r,t,n,o,l,f,u=i[8]({id:"af.remote.do",values:{remoteToken:i[4]}})+"",s,c,p,d,a,_=i[8]("af.remote.or_qr")+"",m,v,b,k,E,w;const P=[Vn,On],N=[];function D(h,I){return I&64&&(e=null),e==null&&(e=Math.round(h[6])!==0),e?0:1}r=D(i,-1),t=N[r]=P[r](i);let C=i[8]("af.remote.steps"),y=[];for(let h=0;h<C.length;h+=1)y[h]=je(Ye(i,C,h));return{c(){t.c(),n=O(),o=L("div"),l=L("ol");for(let h=0;h<y.length;h+=1)y[h].c();f=O(),s=S(u),c=O(),p=L("hr"),d=O(),a=L("div"),m=S(_),v=O(),b=L("br"),k=O(),E=L("canvas")},l(h){t.l(h),n=V(h),o=U(h,"DIV",{});var I=G(o);l=U(I,"OL",{});var j=G(l);for(let Z=0;Z<y.length;Z+=1)y[Z].l(j);j.forEach(g),f=V(I),s=M(I,u),I.forEach(g),c=V(h),p=U(h,"HR",{}),d=V(h),a=U(h,"DIV",{});var T=G(a);m=M(T,_),v=V(T),b=U(T,"BR",{}),k=V(T),E=U(T,"CANVAS",{}),G(E).forEach(g),T.forEach(g)},m(h,I){N[r].m(h,I),$(h,n,I),$(h,o,I),R(o,l);for(let j=0;j<y.length;j+=1)y[j].m(l,null);R(o,f),R(o,s),$(h,c,I),$(h,p,I),$(h,d,I),$(h,a,I),R(a,m),R(a,v),R(a,b),R(a,k),R(a,E),i[16](E),w=!0},p(h,I){let j=r;if(r=D(h,I),r===j?N[r].p(h,I):(te(),B(N[j],1,1,()=>{N[j]=null}),ne(),t=N[r],t?t.p(h,I):(t=N[r]=P[r](h),t.c()),A(t,1),t.m(n.parentNode,n)),I&256){C=h[8]("af.remote.steps");let T;for(T=0;T<C.length;T+=1){const Z=Ye(h,C,T);y[T]?y[T].p(Z,I):(y[T]=je(Z),y[T].c(),y[T].m(l,null))}for(;T<y.length;T+=1)y[T].d(1);y.length=C.length}(!w||I&272)&&u!==(u=h[8]({id:"af.remote.do",values:{remoteToken:h[4]}})+"")&&Y(s,u),(!w||I&256)&&_!==(_=h[8]("af.remote.or_qr")+"")&&Y(m,_)},i(h){w||(A(t),w=!0)},o(h){B(t),w=!1},d(h){N[r].d(h),h&&g(n),h&&g(o),wt(y,h),h&&g(c),h&&g(p),h&&g(d),h&&g(a),i[16](null)}}}function Fn(i){let e,r,t=i[8]("af.remote.generating")+"",n,o;return e=new et({}),{c(){z(e.$$.fragment),r=O(),n=S(t)},l(l){J(e.$$.fragment,l),r=V(l),n=M(l,t)},m(l,f){K(e,l,f),$(l,r,f),$(l,n,f),o=!0},p(l,f){(!o||f&256)&&t!==(t=l[8]("af.remote.generating")+"")&&Y(n,t)},i(l){o||(A(e.$$.fragment,l),o=!0)},o(l){B(e.$$.fragment,l),o=!1},d(l){H(e,l),l&&g(r),l&&g(n)}}}function On(i){let e,r;return e=new oe({props:{level:"error",$$slots:{default:[zn]},$$scope:{ctx:i}}}),{c(){z(e.$$.fragment)},l(t){J(e.$$.fragment,t)},m(t,n){K(e,t,n),r=!0},p(t,n){const o={};n&16777472&&(o.$$scope={dirty:n,ctx:t}),e.$set(o)},i(t){r||(A(e.$$.fragment,t),r=!0)},o(t){B(e.$$.fragment,t),r=!1},d(t){H(e,t)}}}function Vn(i){let e,r;return e=new oe({props:{level:"info",$$slots:{default:[Jn]},$$scope:{ctx:i}}}),{c(){z(e.$$.fragment)},l(t){J(e.$$.fragment,t)},m(t,n){K(e,t,n),r=!0},p(t,n){const o={};n&16777536&&(o.$$scope={dirty:n,ctx:t}),e.$set(o)},i(t){r||(A(e.$$.fragment,t),r=!0)},o(t){B(e.$$.fragment,t),r=!1},d(t){H(e,t)}}}function zn(i){let e,r=i[8]("af.remote.too_late")+"",t;return{c(){e=L("span"),t=S(r),this.h()},l(n){e=U(n,"SPAN",{role:!0});var o=G(e);t=M(o,r),o.forEach(g),this.h()},h(){F(e,"role","status")},m(n,o){$(n,e,o),R(e,t)},p(n,o){o&256&&r!==(r=n[8]("af.remote.too_late")+"")&&Y(t,r)},d(n){n&&g(e)}}}function Jn(i){let e,r=i[8]({id:"af.remote.wait",values:{timeout:Math.round(i[6]/1e3)}})+"",t;return{c(){e=L("span"),t=S(r),this.h()},l(n){e=U(n,"SPAN",{role:!0});var o=G(e);t=M(o,r),o.forEach(g),this.h()},h(){F(e,"role","status")},m(n,o){$(n,e,o),R(e,t)},p(n,o){o&320&&r!==(r=n[8]({id:"af.remote.wait",values:{timeout:Math.round(n[6]/1e3)}})+"")&&Y(t,r)},d(n){n&&g(e)}}}function je(i){let e,r=i[21]+"",t;return{c(){e=L("li"),t=S(r)},l(n){e=U(n,"LI",{});var o=G(e);t=M(o,r),o.forEach(g)},m(n,o){$(n,e,o),R(e,t)},p(n,o){o&256&&r!==(r=n[21]+"")&&Y(t,r)},d(n){n&&g(e)}}}function Kn(i){let e,r,t,n,o,l,f;const u=[qn,Gn,jn,Yn],s=[];function c(d,a){return d[1].status===ae.Success?0:d[1].status===ae.Fail?1:d[1].status===ae.Error?2:3}e=c(i),r=s[e]=u[e](i),n=new oe({props:{level:"debug",$$slots:{default:[tr]},$$scope:{ctx:i}}});let p=i[1].feedback&&Ge(i);return{c(){r.c(),t=O(),z(n.$$.fragment),o=O(),p&&p.c(),l=X()},l(d){r.l(d),t=V(d),J(n.$$.fragment,d),o=V(d),p&&p.l(d),l=X()},m(d,a){s[e].m(d,a),$(d,t,a),K(n,d,a),$(d,o,a),p&&p.m(d,a),$(d,l,a),f=!0},p(d,a){let _=e;e=c(d),e===_?s[e].p(d,a):(te(),B(s[_],1,1,()=>{s[_]=null}),ne(),r=s[e],r?r.p(d,a):(r=s[e]=u[e](d),r.c()),A(r,1),r.m(t.parentNode,t));const m={};a&16777218&&(m.$$scope={dirty:a,ctx:d}),n.$set(m),d[1].feedback?p?p.p(d,a):(p=Ge(d),p.c(),p.m(l.parentNode,l)):p&&(p.d(1),p=null)},i(d){f||(A(r),A(n.$$.fragment,d),f=!0)},o(d){B(r),B(n.$$.fragment,d),f=!1},d(d){s[e].d(d),d&&g(t),H(n,d),d&&g(o),p&&p.d(d),d&&g(l)}}}function Hn(i){let e,r;return e=new Q({props:{icon:"mdi:checkbox-blank-circle-outline",style:"color: var(--color-neutral);"}}),{c(){z(e.$$.fragment)},l(t){J(e.$$.fragment,t)},m(t,n){K(e,t,n),r=!0},p:q,i(t){r||(A(e.$$.fragment,t),r=!0)},o(t){B(e.$$.fragment,t),r=!1},d(t){H(e,t)}}}function Yn(i){let e,r;return e=new oe({props:{level:"error",$$slots:{default:[Qn]},$$scope:{ctx:i}}}),{c(){z(e.$$.fragment)},l(t){J(e.$$.fragment,t)},m(t,n){K(e,t,n),r=!0},p(t,n){const o={};n&16777218&&(o.$$scope={dirty:n,ctx:t}),e.$set(o)},i(t){r||(A(e.$$.fragment,t),r=!0)},o(t){B(e.$$.fragment,t),r=!1},d(t){H(e,t)}}}function jn(i){let e,r;return e=new oe({props:{level:"error",$$slots:{default:[Wn]},$$scope:{ctx:i}}}),{c(){z(e.$$.fragment)},l(t){J(e.$$.fragment,t)},m(t,n){K(e,t,n),r=!0},p(t,n){const o={};n&16777218&&(o.$$scope={dirty:n,ctx:t}),e.$set(o)},i(t){r||(A(e.$$.fragment,t),r=!0)},o(t){B(e.$$.fragment,t),r=!1},d(t){H(e,t)}}}function Gn(i){let e,r,t,n;const o=[xn,Xn,Zn],l=[];function f(u,s){return u[2].verifier==="remote"&&u[1].msg==="not yet"?0:u[2].verifier==="remote"&&u[1].msg==="token invalid"?1:2}return e=f(i),r=l[e]=o[e](i),{c(){r.c(),t=X()},l(u){r.l(u),t=X()},m(u,s){l[e].m(u,s),$(u,t,s),n=!0},p(u,s){let c=e;e=f(u),e===c?l[e].p(u,s):(te(),B(l[c],1,1,()=>{l[c]=null}),ne(),r=l[e],r?r.p(u,s):(r=l[e]=o[e](u),r.c()),A(r,1),r.m(t.parentNode,t))},i(u){n||(A(r),n=!0)},o(u){B(r),n=!1},d(u){l[e].d(u),u&&g(t)}}}function qn(i){let e,r;return e=new vt({props:{msg:null}}),{c(){z(e.$$.fragment)},l(t){J(e.$$.fragment,t)},m(t,n){K(e,t,n),r=!0},p:q,i(t){r||(A(e.$$.fragment,t),r=!0)},o(t){B(e.$$.fragment,t),r=!1},d(t){H(e,t)}}}function Qn(i){let e,r=i[1].msg+"",t;return{c(){e=S("unexpected: "),t=S(r)},l(n){e=M(n,"unexpected: "),t=M(n,r)},m(n,o){$(n,e,o),$(n,t,o)},p(n,o){o&2&&r!==(r=n[1].msg+"")&&Y(t,r)},d(n){n&&g(e),n&&g(t)}}}function Wn(i){let e,r=i[1].msg+"",t;return{c(){e=S("error: "),t=S(r)},l(n){e=M(n,"error: "),t=M(n,r)},m(n,o){$(n,e,o),$(n,t,o)},p(n,o){o&2&&r!==(r=n[1].msg+"")&&Y(t,r)},d(n){n&&g(e),n&&g(t)}}}function Zn(i){let e,r;return e=new oe({props:{level:"error",$$slots:{default:[er]},$$scope:{ctx:i}}}),{c(){z(e.$$.fragment)},l(t){J(e.$$.fragment,t)},m(t,n){K(e,t,n),r=!0},p(t,n){const o={};n&16777218&&(o.$$scope={dirty:n,ctx:t}),e.$set(o)},i(t){r||(A(e.$$.fragment,t),r=!0)},o(t){B(e.$$.fragment,t),r=!1},d(t){H(e,t)}}}function Xn(i){let e,r,t=i[8]("af.remote.expired")+"",n,o;return e=new Q({props:{icon:"mdi:cancel"}}),{c(){z(e.$$.fragment),r=O(),n=S(t)},l(l){J(e.$$.fragment,l),r=V(l),n=M(l,t)},m(l,f){K(e,l,f),$(l,r,f),$(l,n,f),o=!0},p(l,f){(!o||f&256)&&t!==(t=l[8]("af.remote.expired")+"")&&Y(n,t)},i(l){o||(A(e.$$.fragment,l),o=!0)},o(l){B(e.$$.fragment,l),o=!1},d(l){H(e,l),l&&g(r),l&&g(n)}}}function xn(i){let e,r,t=i[8]("af.remote.not_yet")+"",n,o;return e=new Q({props:{icon:"mdi:timer-outline"}}),{c(){z(e.$$.fragment),r=O(),n=S(t)},l(l){J(e.$$.fragment,l),r=V(l),n=M(l,t)},m(l,f){K(e,l,f),$(l,r,f),$(l,n,f),o=!0},p(l,f){(!o||f&256)&&t!==(t=l[8]("af.remote.not_yet")+"")&&Y(n,t)},i(l){o||(A(e.$$.fragment,l),o=!0)},o(l){B(e.$$.fragment,l),o=!1},d(l){H(e,l),l&&g(r),l&&g(n)}}}function er(i){let e,r=i[1].msg+"",t;return{c(){e=S("fail: "),t=S(r)},l(n){e=M(n,"fail: "),t=M(n,r)},m(n,o){$(n,e,o),$(n,t,o)},p(n,o){o&2&&r!==(r=n[1].msg+"")&&Y(t,r)},d(n){n&&g(e),n&&g(t)}}}function tr(i){let e,r=JSON.stringify(i[1].feedback)+"",t;return{c(){e=S("Feedback: "),t=S(r)},l(n){e=M(n,"Feedback: "),t=M(n,r)},m(n,o){$(n,e,o),$(n,t,o)},p(n,o){o&2&&r!==(r=JSON.stringify(n[1].feedback)+"")&&Y(t,r)},d(n){n&&g(e),n&&g(t)}}}function Ge(i){let e,r=i[2].verifier==="limited"&&qe(i);return{c(){r&&r.c(),e=X()},l(t){r&&r.l(t),e=X()},m(t,n){r&&r.m(t,n),$(t,e,n)},p(t,n){t[2].verifier==="limited"?r?r.p(t,n):(r=qe(t),r.c(),r.m(e.parentNode,e)):r&&(r.d(1),r=null)},d(t){r&&r.d(t),t&&g(e)}}}function qe(i){let e,r=i[1].feedback.remaining+"",t;return{c(){e=S("Remaining: "),t=S(r)},l(n){e=M(n,"Remaining: "),t=M(n,r)},m(n,o){$(n,e,o),$(n,t,o)},p(n,o){o&2&&r!==(r=n[1].feedback.remaining+"")&&Y(t,r)},d(n){n&&g(e),n&&g(t)}}}function nr(i){let e,r,t,n=i[2].name+"",o,l,f,u,s,c,p,d,a,_,m,v,b,k;u=new Sn({props:{verifier:i[2].verifier}});const E=[Ln,Rn,Dn,Pn,Mn],w=[];function P(y,h){return y[2].verifier==="pw"?0:y[2].verifier==="otp_totp"?1:y[2].verifier==="limited"?2:y[2].verifier==="webauthn"?3:y[2].verifier==="remote"?4:-1}~(d=P(i))&&(a=w[d]=E[d](i));const N=[Hn,Kn],D=[];function C(y,h){return y[1]===void 0?0:1}return v=C(i),b=D[v]=N[v](i),{c(){e=L("div"),r=L("div"),t=L("div"),o=S(n),l=O(),f=L("div"),z(u.$$.fragment),s=O(),c=L("div"),p=L("div"),a&&a.c(),_=O(),m=L("div"),b.c(),this.h()},l(y){e=U(y,"DIV",{class:!0});var h=G(e);r=U(h,"DIV",{class:!0});var I=G(r);t=U(I,"DIV",{class:!0});var j=G(t);o=M(j,n),j.forEach(g),l=V(I),f=U(I,"DIV",{class:!0});var T=G(f);J(u.$$.fragment,T),T.forEach(g),I.forEach(g),s=V(h),c=U(h,"DIV",{class:!0});var Z=G(c);p=U(Z,"DIV",{class:!0});var Oe=G(p);a&&a.l(Oe),Oe.forEach(g),_=V(Z),m=U(Z,"DIV",{class:!0});var Ve=G(m);b.l(Ve),Ve.forEach(g),Z.forEach(g),h.forEach(g),this.h()},h(){F(t,"class","name"),F(f,"class","verifier svelte-oxj82c"),F(r,"class","left svelte-oxj82c"),F(p,"class","challenge"),F(m,"class","result"),F(c,"class","right svelte-oxj82c"),F(e,"class","af-challenge svelte-oxj82c")},m(y,h){$(y,e,h),R(e,r),R(r,t),R(t,o),R(r,l),R(r,f),K(u,f,null),R(e,s),R(e,c),R(c,p),~d&&w[d].m(p,null),R(c,_),R(c,m),D[v].m(m,null),k=!0},p(y,[h]){(!k||h&4)&&n!==(n=y[2].name+"")&&Y(o,n);const I={};h&4&&(I.verifier=y[2].verifier),u.$set(I);let j=d;d=P(y),d===j?~d&&w[d].p(y,h):(a&&(te(),B(w[j],1,1,()=>{w[j]=null}),ne()),~d?(a=w[d],a?a.p(y,h):(a=w[d]=E[d](y),a.c()),A(a,1),a.m(p,null)):a=null);let T=v;v=C(y),v===T?D[v].p(y,h):(te(),B(D[T],1,1,()=>{D[T]=null}),ne(),b=D[v],b?b.p(y,h):(b=D[v]=N[v](y),b.c()),A(b,1),b.m(m,null))},i(y){k||(A(u.$$.fragment,y),A(a),A(b),k=!0)},o(y){B(u.$$.fragment,y),B(a),B(b),k=!1},d(y){y&&g(e),H(u),~d&&w[d].d(),D[v].d()}}}function rr(i,e,r){let t;Ie(i,xe,C=>r(8,t=C));let{uid:n}=e,{af:o}=e,{attempt:l}=e,{callback:f}=e,{result:u}=e,s,c,p,d;function a(){r(6,d=Math.max(0,p-new Date))}const _=setInterval(a,1e3);pt(()=>{clearInterval(_)}),a();let m;async function v(){await f(o.uuid,JSON.stringify({state:"1_generate"}));const C=await navigator.credentials.get(u.feedback);await f(o.uuid,JSON.stringify({state:"2_verify",assertion:C}))}async function b(){r(4,{token:c}=await f(o.uuid,JSON.stringify({state:"1_generate"})),c),p=new Date,p.setSeconds(p.getSeconds()+o.public_params.timeout),r(1,u=void 0),yt.remoteWait(n,c).then(k).catch(console.warn);const C=new URL(`https://${window.location.host}/remote-decide?token=${c}`);me.toCanvas(m,C.toString(),y=>{y&&console.error(y)})}async function k(){Math.round(d)!==0&&await f(o.uuid,JSON.stringify({state:"2_verify",token:c}))}async function E(){o.verifier==="otp_totp"&&l&&l.length===o.public_params.digits&&(await f(o.uuid,l),u.status===ae.Fail&&r(0,l=""))}function w(){l=this.value,r(0,l)}const P=()=>f(o.uuid,l);function N(){l=this.value,r(0,l)}function D(C){bt[C?"unshift":"push"](()=>{m=C,r(7,m)})}return i.$$set=C=>{"uid"in C&&r(12,n=C.uid),"af"in C&&r(2,o=C.af),"attempt"in C&&r(0,l=C.attempt),"callback"in C&&r(3,f=C.callback),"result"in C&&r(1,u=C.result)},i.$$.update=()=>{i.$$.dirty&2&&r(5,s=u&&u.status===ae.Success),i.$$.dirty&1&&E(),i.$$.dirty&29&&($t.includes(o.verifier)&&f(o.uuid,l),o.verifier==="remote"&&!c&&b())},[l,u,o,f,c,s,d,m,t,v,b,k,n,w,P,N,D]}class dr extends Qe{constructor(e){super();We(this,e,rr,nr,Ze,{uid:12,af:2,attempt:0,callback:3,result:1})}}export{Sn as A,dr as a,me as b};

var Wt=Object.defineProperty,qt=Object.defineProperties;var Jt=Object.getOwnPropertyDescriptors;var ct=Object.getOwnPropertySymbols;var Qt=Object.prototype.hasOwnProperty,Xt=Object.prototype.propertyIsEnumerable;var dt=(l,e,t)=>e in l?Wt(l,e,{enumerable:!0,configurable:!0,writable:!0,value:t}):l[e]=t,mt=(l,e)=>{for(var t in e||(e={}))Qt.call(e,t)&&dt(l,t,e[t]);if(ct)for(var t of ct(e))Xt.call(e,t)&&dt(l,t,e[t]);return l},pt=(l,e)=>qt(l,Jt(e));import{S as Mt,i as zt,s as Bt,N as Zt,e as E,k as O,c as D,a as I,m as S,d as m,b as v,f as $t,g as M,J as a,_ as $,O as xt,P as el,Q as tl,q as V,o as H,G as Vt,Y as ll,v as Yt,W as nl,t as j,h as N,E as Re,a3 as _t,w as ne,x as re,y as ie,B as se,I as gt,j as X,l as ht,a2 as We,a1 as Ye,n as Ze,p as $e,K as Ge}from"./index-471c5598.js";import{_ as Ue,h as je,j as rl,u as vt,c as il,Y as sl,a as He}from"./api2-564f7f8d.js";import{I as Fe}from"./Icon-b960e3f0.js";import{L as Gt}from"./Loading-28866ca5.js";import{B as ol}from"./BoxError-e4fbeeb7.js";import{B as al}from"./Box-a27f9004.js";import{d as fl}from"./store-669d404b.js";import{U as ul}from"./UnsavedChanges-a25429c7.js";var cl=new Map([["avi","video/avi"],["gif","image/gif"],["ico","image/x-icon"],["jpeg","image/jpeg"],["jpg","image/jpeg"],["mkv","video/x-matroska"],["mov","video/quicktime"],["mp4","video/mp4"],["pdf","application/pdf"],["png","image/png"],["zip","application/zip"],["doc","application/msword"],["docx","application/vnd.openxmlformats-officedocument.wordprocessingml.document"]]);function qe(l,e){var t=dl(l);if(typeof t.path!="string"){var n=l.webkitRelativePath;Object.defineProperty(t,"path",{value:typeof e=="string"?e:typeof n=="string"&&n.length>0?n:l.name,writable:!1,configurable:!1,enumerable:!0})}return t}function dl(l){var e=l.name,t=e&&e.lastIndexOf(".")!==-1;if(t&&!l.type){var n=e.split(".").pop().toLowerCase(),i=cl.get(n);i&&Object.defineProperty(l,"type",{value:i,writable:!1,configurable:!1,enumerable:!0})}return l}var ml=[".DS_Store","Thumbs.db"];function pl(l){return Ue(this,void 0,void 0,function(){return je(this,function(e){return[2,_l(l)&&l.dataTransfer?vl(l.dataTransfer,l.type):gl(l)]})})}function _l(l){return!!l.dataTransfer}function gl(l){var e=hl(l.target)?l.target.files?xe(l.target.files):[]:[];return e.map(function(t){return qe(t)})}function hl(l){return l!==null}function vl(l,e){return Ue(this,void 0,void 0,function(){var t,n;return je(this,function(i){switch(i.label){case 0:return l.items?(t=xe(l.items).filter(function(s){return s.kind==="file"}),e!=="drop"?[2,t]:[4,Promise.all(t.map(bl))]):[3,2];case 1:return n=i.sent(),[2,bt(Ht(n))];case 2:return[2,bt(xe(l.files).map(function(s){return qe(s)}))]}})})}function bt(l){return l.filter(function(e){return ml.indexOf(e.name)===-1})}function xe(l){for(var e=[],t=0;t<l.length;t++){var n=l[t];e.push(n)}return e}function bl(l){if(typeof l.webkitGetAsEntry!="function")return Et(l);var e=l.webkitGetAsEntry();return e&&e.isDirectory?Kt(e):Et(l)}function Ht(l){return l.reduce(function(e,t){return rl(e,Array.isArray(t)?Ht(t):[t])},[])}function Et(l){var e=l.getAsFile();if(!e)return Promise.reject(l+" is not a File");var t=qe(e);return Promise.resolve(t)}function El(l){return Ue(this,void 0,void 0,function(){return je(this,function(e){return[2,l.isDirectory?Kt(l):Dl(l)]})})}function Kt(l){var e=l.createReader();return new Promise(function(t,n){var i=[];function s(){var r=this;e.readEntries(function(o){return Ue(r,void 0,void 0,function(){var g,_,d;return je(this,function(u){switch(u.label){case 0:if(o.length)return[3,5];u.label=1;case 1:return u.trys.push([1,3,,4]),[4,Promise.all(i)];case 2:return g=u.sent(),t(g),[3,4];case 3:return _=u.sent(),n(_),[3,4];case 4:return[3,6];case 5:d=Promise.all(o.map(El)),i.push(d),s(),u.label=6;case 6:return[2]}})})},function(o){n(o)})}s()})}function Dl(l){return Ue(this,void 0,void 0,function(){return je(this,function(e){return[2,new Promise(function(t,n){l.file(function(i){var s=qe(i,l.fullPath);t(s)},function(i){n(i)})})]})})}function yl(l,e){if(l&&e){const t=Array.isArray(e)?e:e.split(","),n=l.name||"",i=(l.type||"").toLowerCase(),s=i.replace(/\/.*$/,"");return t.some(r=>{const o=r.trim().toLowerCase();return o.charAt(0)==="."?n.toLowerCase().endsWith(o):o.endsWith("/*")?s===o.replace(/\/.*$/,""):i===o})}return!0}const kl="file-invalid-type",Il="file-too-large",Fl="file-too-small",wl="too-many-files",Ll=l=>{l=Array.isArray(l)&&l.length===1?l[0]:l;const e=Array.isArray(l)?`one of ${l.join(", ")}`:l;return{code:kl,message:`File type must be ${e}`}},Dt=l=>({code:Il,message:`File is larger than ${l} bytes`}),yt=l=>({code:Fl,message:`File is smaller than ${l} bytes`}),Al={code:wl,message:"Too many files"};function Pl(l,e){const t=l.type==="application/x-moz-file"||yl(l,e);return[t,t?null:Ll(e)]}function Tl(l,e,t){if(Ce(l.size))if(Ce(e)&&Ce(t)){if(l.size>t)return[!1,Dt(t)];if(l.size<e)return[!1,yt(e)]}else{if(Ce(e)&&l.size<e)return[!1,yt(e)];if(Ce(t)&&l.size>t)return[!1,Dt(t)]}return[!0,null]}function Ce(l){return l!=null}function kt(l){return typeof l.isPropagationStopped=="function"?l.isPropagationStopped():typeof l.cancelBubble!="undefined"?l.cancelBubble:!1}function Ke(l){return l.dataTransfer?Array.prototype.some.call(l.dataTransfer.types,e=>e==="Files"||e==="application/x-moz-file"):!!l.target&&!!l.target.files}function It(l){l.preventDefault()}function Ol(l){return l.indexOf("MSIE")!==-1||l.indexOf("Trident/")!==-1}function Sl(l){return l.indexOf("Edge/")!==-1}function Cl(l=window.navigator.userAgent){return Ol(l)||Sl(l)}function Rl(l){let e,t;return{c(){e=E("p"),t=j("Drag 'n' drop some files here, or click to select files")},l(n){e=D(n,"P",{});var i=I(e);t=N(i,"Drag 'n' drop some files here, or click to select files"),i.forEach(m)},m(n,i){M(n,e,i),a(e,t)},p:Re,d(n){n&&m(e)}}}function Ul(l){let e,t,n,i,s,r,o;const g=l[28].default,_=Zt(g,l,l[27],null),d=_||Rl();return{c(){e=E("div"),t=E("input"),n=O(),d&&d.c(),this.h()},l(u){e=D(u,"DIV",{tabindex:!0,class:!0,style:!0});var p=I(e);t=D(p,"INPUT",{accept:!0,type:!0,autocomplete:!0,tabindex:!0,style:!0}),n=S(p),d&&d.l(p),p.forEach(m),this.h()},h(){v(t,"accept",l[0]),t.multiple=l[1],v(t,"type","file"),v(t,"autocomplete","off"),v(t,"tabindex","-1"),$t(t,"display","none"),v(e,"tabindex","0"),v(e,"class",i=(l[4]?"":"dropzone")+" "+l[2]+" svelte-817dg2"),v(e,"style",l[3])},m(u,p){M(u,e,p),a(e,t),l[29](t),a(e,n),d&&d.m(e,null),l[30](e),s=!0,r||(o=[$(t,"change",l[14]),$(t,"click",jl),$(e,"keydown",l[16](l[7])),$(e,"focus",l[16](l[8])),$(e,"blur",l[16](l[9])),$(e,"click",l[15](l[10])),$(e,"dragenter",l[17](l[11])),$(e,"dragover",l[17](l[12])),$(e,"dragleave",l[17](l[13])),$(e,"drop",l[17](l[14]))],r=!0)},p(u,p){(!s||p[0]&1)&&v(t,"accept",u[0]),(!s||p[0]&2)&&(t.multiple=u[1]),_&&_.p&&(!s||p[0]&134217728)&&xt(_,g,u,u[27],s?tl(g,u[27],p,null):el(u[27]),null),(!s||p[0]&20&&i!==(i=(u[4]?"":"dropzone")+" "+u[2]+" svelte-817dg2"))&&v(e,"class",i),(!s||p[0]&8)&&v(e,"style",u[3])},i(u){s||(V(d,u),s=!0)},o(u){H(d,u),s=!1},d(u){u&&m(e),l[29](null),d&&d.d(u),l[30](null),r=!1,Vt(o)}}}function jl(l){l.stopPropagation()}function Nl(l,e,t){let{$$slots:n={},$$scope:i}=e,{accept:s}=e,{disabled:r=!1}=e,{getFilesFromEvent:o=pl}=e,{maxSize:g=1/0}=e,{minSize:_=0}=e,{multiple:d=!0}=e,{preventDropOnDocument:u=!0}=e,{noClick:p=!1}=e,{noKeyboard:F=!1}=e,{noDrag:w=!1}=e,{noDragEventsBubbling:A=!1}=e,{containerClasses:P=""}=e,{containerStyles:h=""}=e,{disableDefaultStyles:L=!1}=e;const c=ll();let y={isFocused:!1,isFileDialogActive:!1,isDragActive:!1,isDragAccept:!1,isDragReject:!1,draggedFiles:[],acceptedFiles:[],fileRejections:[]},k,R;function T(){y.isFileDialogActive=!1,y.isDragActive=!1,y.draggedFiles=[],y.acceptedFiles=[],y.fileRejections=[]}function W(){R&&(t(6,R.value=null,R),y.isFileDialogActive=!0,R.click())}function z(f){!k||!k.isEqualNode(f.target)||(f.keyCode===32||f.keyCode===13)&&(f.preventDefault(),W())}function me(){y.isFocused=!0}function be(){y.isFocused=!1}function ye(){p||(Cl()?setTimeout(W,0):W())}function we(f){f.preventDefault(),pe(f),fe=[...fe,f.target],Ke(f)&&Promise.resolve(o(f)).then(B=>{kt(f)&&!A||(y.draggedFiles=B,y.isDragActive=!0,c("dragenter",{dragEvent:f}))})}function x(f){if(f.preventDefault(),pe(f),f.dataTransfer)try{f.dataTransfer.dropEffect="copy"}catch{}return Ke(f)&&c("dragover",{dragEvent:f}),!1}function Le(f){f.preventDefault(),pe(f);const B=fe.filter(K=>k&&k.contains(K)),Z=B.indexOf(f.target);Z!==-1&&B.splice(Z,1),fe=B,!(B.length>0)&&(y.isDragActive=!1,y.draggedFiles=[],Ke(f)&&c("dragleave",{dragEvent:f}))}function ae(f){f.preventDefault(),pe(f),fe=[],Ke(f)&&Promise.resolve(o(f)).then(B=>{if(kt(f)&&!A)return;const Z=[],K=[];B.forEach(Y=>{const[te,Pe]=Pl(Y,s),[Te,Oe]=Tl(Y,_,g);if(te&&Te)Z.push(Y);else{const ue=[Pe,Oe].filter(le=>le);K.push({file:Y,errors:ue})}}),!d&&Z.length>1&&(Z.forEach(Y=>{K.push({file:Y,errors:[Al]})}),Z.splice(0)),y.acceptedFiles=Z,y.fileRejections=K,c("drop",{acceptedFiles:Z,fileRejections:K,event:f}),K.length>0&&c("droprejected",{fileRejections:K,event:f}),Z.length>0&&c("dropaccepted",{acceptedFiles:Z,event:f})}),T()}function q(f){return r?null:f}function ee(f){return F?null:q(f)}function Ae(f){return w?null:q(f)}function pe(f){A&&f.stopPropagation()}let fe=[];function oe(f){k&&k.contains(f.target)||(f.preventDefault(),fe=[])}function de(){y.isFileDialogActive&&setTimeout(()=>{if(R){const{files:f}=R;f.length||(y.isFileDialogActive=!1,c("filedialogcancel"))}},300)}Yt(()=>{window.addEventListener("focus",de,!1),u&&(document.addEventListener("dragover",It,!1),document.addEventListener("drop",oe,!1))}),nl(()=>{window.removeEventListener("focus",de,!1),u&&(document.removeEventListener("dragover",It),document.removeEventListener("drop",oe))});function Ee(f){_t[f?"unshift":"push"](()=>{R=f,t(6,R)})}function ke(f){_t[f?"unshift":"push"](()=>{k=f,t(5,k)})}return l.$$set=f=>{"accept"in f&&t(0,s=f.accept),"disabled"in f&&t(18,r=f.disabled),"getFilesFromEvent"in f&&t(19,o=f.getFilesFromEvent),"maxSize"in f&&t(20,g=f.maxSize),"minSize"in f&&t(21,_=f.minSize),"multiple"in f&&t(1,d=f.multiple),"preventDropOnDocument"in f&&t(22,u=f.preventDropOnDocument),"noClick"in f&&t(23,p=f.noClick),"noKeyboard"in f&&t(24,F=f.noKeyboard),"noDrag"in f&&t(25,w=f.noDrag),"noDragEventsBubbling"in f&&t(26,A=f.noDragEventsBubbling),"containerClasses"in f&&t(2,P=f.containerClasses),"containerStyles"in f&&t(3,h=f.containerStyles),"disableDefaultStyles"in f&&t(4,L=f.disableDefaultStyles),"$$scope"in f&&t(27,i=f.$$scope)},[s,d,P,h,L,k,R,z,me,be,ye,we,x,Le,ae,q,ee,Ae,r,o,g,_,u,p,F,w,A,i,n,Ee,ke]}class Ml extends Mt{constructor(e){super();zt(this,e,Nl,Ul,Bt,{accept:0,disabled:18,getFilesFromEvent:19,maxSize:20,minSize:21,multiple:1,preventDropOnDocument:22,noClick:23,noKeyboard:24,noDrag:25,noDragEventsBubbling:26,containerClasses:2,containerStyles:3,disableDefaultStyles:4},null,[-1,-1])}}function Ft(l,e,t){const n=l.slice();return n[20]=e[t],n}function wt(l,e,t){const n=l.slice();return n[20]=e[t],n}function Lt(l,e,t){const n=l.slice();return n[25]=e[t],n}function At(l,e,t){const n=l.slice();return n[20]=e[t],n}function Pt(l){let e,t;return e=new ul({}),{c(){ne(e.$$.fragment)},l(n){re(e.$$.fragment,n)},m(n,i){ie(e,n,i),t=!0},i(n){t||(V(e.$$.fragment,n),t=!0)},o(n){H(e.$$.fragment,n),t=!1},d(n){se(e,n)}}}function zl(l){let e=l[8]("config.id.img.dropzone")+"",t;return{c(){t=j(e)},l(n){t=N(n,e)},m(n,i){M(n,t,i)},p(n,i){i&256&&e!==(e=n[8]("config.id.img.dropzone")+"")&&X(t,e)},d(n){n&&m(t)}}}function Tt(l){let e,t=l[8]("config.id.img.preview.title")+"",n,i,s,r,o,g;return{c(){e=E("div"),n=j(t),i=E("br"),s=O(),r=E("img"),this.h()},l(_){e=D(_,"DIV",{class:!0});var d=I(e);n=N(d,t),i=D(d,"BR",{}),s=S(d),r=D(d,"IMG",{alt:!0,class:!0,src:!0}),d.forEach(m),this.h()},h(){v(r,"alt",o=l[8]("iori.user.profile")),v(r,"class","user-img"),gt(r.src,g=l[1])||v(r,"src",g),v(e,"class","preview svelte-vmpbfb")},m(_,d){M(_,e,d),a(e,n),a(e,i),a(e,s),a(e,r)},p(_,d){d&256&&t!==(t=_[8]("config.id.img.preview.title")+"")&&X(n,t),d&256&&o!==(o=_[8]("iori.user.profile"))&&v(r,"alt",o),d&2&&!gt(r.src,g=_[1])&&v(r,"src",g)},d(_){_&&m(e)}}}function Bl(l){let e=l[8]("config.id.uid_help")+"",t;return{c(){t=j(e)},l(n){t=N(n,e)},m(n,i){M(n,t,i)},p(n,i){i&256&&e!==(e=n[8]("config.id.uid_help")+"")&&X(t,e)},d(n){n&&m(t)}}}function Vl(l){let e,t;return e=new Gt({}),{c(){ne(e.$$.fragment)},l(n){re(e.$$.fragment,n)},m(n,i){ie(e,n,i),t=!0},p:Re,i(n){t||(V(e.$$.fragment,n),t=!0)},o(n){H(e.$$.fragment,n),t=!1},d(n){se(e,n)}}}function Yl(l){let e,t,n=l[8]("config.id.available")+"",i,s;return e=new Fe({props:{icon:"mdi:check",style:"color: var(--color-ok);"}}),{c(){ne(e.$$.fragment),t=O(),i=j(n)},l(r){re(e.$$.fragment,r),t=S(r),i=N(r,n)},m(r,o){ie(e,r,o),M(r,t,o),M(r,i,o),s=!0},p(r,o){(!s||o&256)&&n!==(n=r[8]("config.id.available")+"")&&X(i,n)},i(r){s||(V(e.$$.fragment,r),s=!0)},o(r){H(e.$$.fragment,r),s=!1},d(r){se(e,r),r&&m(t),r&&m(i)}}}function Gl(l){let e,t,n=l[8]("config.id.current")+"",i,s;return e=new Fe({props:{icon:"mdi:check",style:"color: var(--color-info);"}}),{c(){ne(e.$$.fragment),t=O(),i=j(n)},l(r){re(e.$$.fragment,r),t=S(r),i=N(r,n)},m(r,o){ie(e,r,o),M(r,t,o),M(r,i,o),s=!0},p(r,o){(!s||o&256)&&n!==(n=r[8]("config.id.current")+"")&&X(i,n)},i(r){s||(V(e.$$.fragment,r),s=!0)},o(r){H(e.$$.fragment,r),s=!1},d(r){se(e,r),r&&m(t),r&&m(i)}}}function Hl(l){let e,t,n=l[8]("config.id.blank")+"",i,s;return e=new Fe({props:{icon:"mdi:cancel",style:"color: var(--color-error);"}}),{c(){ne(e.$$.fragment),t=O(),i=j(n)},l(r){re(e.$$.fragment,r),t=S(r),i=N(r,n)},m(r,o){ie(e,r,o),M(r,t,o),M(r,i,o),s=!0},p(r,o){(!s||o&256)&&n!==(n=r[8]("config.id.blank")+"")&&X(i,n)},i(r){s||(V(e.$$.fragment,r),s=!0)},o(r){H(e.$$.fragment,r),s=!1},d(r){se(e,r),r&&m(t),r&&m(i)}}}function Kl(l){let e,t,n;return e=new Fe({props:{icon:"mdi:alert",style:"color: var(--color-error);"}}),{c(){ne(e.$$.fragment),t=j(`
					Taken`)},l(i){re(e.$$.fragment,i),t=N(i,`
					Taken`)},m(i,s){ie(e,i,s),M(i,t,s),n=!0},p:Re,i(i){n||(V(e.$$.fragment,i),n=!0)},o(i){H(e.$$.fragment,i),n=!1},d(i){se(e,i),i&&m(t)}}}function Wl(l){let e,t;return e=new Gt({}),{c(){ne(e.$$.fragment)},l(n){re(e.$$.fragment,n)},m(n,i){ie(e,n,i),t=!0},p:Re,i(n){t||(V(e.$$.fragment,n),t=!0)},o(n){H(e.$$.fragment,n),t=!1},d(n){se(e,n)}}}function ql(l){let e,t;return e=new Fe({props:{icon:"mdi:check",style:"color: var(--color-ok);"}}),{c(){ne(e.$$.fragment)},l(n){re(e.$$.fragment,n)},m(n,i){ie(e,n,i),t=!0},p:Re,i(n){t||(V(e.$$.fragment,n),t=!0)},o(n){H(e.$$.fragment,n),t=!1},d(n){se(e,n)}}}function Jl(l){let e,t,n=l[8]("config.id.blank")+"",i,s;return e=new Fe({props:{icon:"mdi:cancel",style:"color: var(--color-error);"}}),{c(){ne(e.$$.fragment),t=O(),i=j(n)},l(r){re(e.$$.fragment,r),t=S(r),i=N(r,n)},m(r,o){ie(e,r,o),M(r,t,o),M(r,i,o),s=!0},p(r,o){(!s||o&256)&&n!==(n=r[8]("config.id.blank")+"")&&X(i,n)},i(r){s||(V(e.$$.fragment,r),s=!0)},o(r){H(e.$$.fragment,r),s=!1},d(r){se(e,r),r&&m(t),r&&m(i)}}}function Ot(l){let e,t,n,i,s,r,o,g,_,d=l[7]&&St(l),u=l[7]&&l[7].perms&&Ut(l);return{c(){e=E("div"),t=E("h2"),n=j("Groups"),i=O(),d&&d.c(),s=O(),r=E("div"),o=E("h2"),g=j("Perms"),_=O(),u&&u.c(),this.h()},l(p){e=D(p,"DIV",{class:!0});var F=I(e);t=D(F,"H2",{});var w=I(t);n=N(w,"Groups"),w.forEach(m),i=S(F),d&&d.l(F),F.forEach(m),s=S(p),r=D(p,"DIV",{class:!0});var A=I(r);o=D(A,"H2",{});var P=I(o);g=N(P,"Perms"),P.forEach(m),_=S(A),u&&u.l(A),A.forEach(m),this.h()},h(){v(e,"class","flex-in svelte-vmpbfb"),v(r,"class","flex-in svelte-vmpbfb")},m(p,F){M(p,e,F),a(e,t),a(t,n),a(e,i),d&&d.m(e,null),M(p,s,F),M(p,r,F),a(r,o),a(o,g),a(r,_),u&&u.m(r,null)},p(p,F){p[7]?d?d.p(p,F):(d=St(p),d.c(),d.m(e,null)):d&&(d.d(1),d=null),p[7]&&p[7].perms?u?u.p(p,F):(u=Ut(p),u.c(),u.m(r,null)):u&&(u.d(1),u=null)},d(p){p&&m(e),d&&d.d(),p&&m(s),p&&m(r),u&&u.d()}}}function St(l){let e,t=l[7].groups,n=[];for(let i=0;i<t.length;i+=1)n[i]=Rt(Lt(l,t,i));return{c(){for(let i=0;i<n.length;i+=1)n[i].c();e=ht()},l(i){for(let s=0;s<n.length;s+=1)n[s].l(i);e=ht()},m(i,s){for(let r=0;r<n.length;r+=1)n[r].m(i,s);M(i,e,s)},p(i,s){if(s&128){t=i[7].groups;let r;for(r=0;r<t.length;r+=1){const o=Lt(i,t,r);n[r]?n[r].p(o,s):(n[r]=Rt(o),n[r].c(),n[r].m(e.parentNode,e))}for(;r<n.length;r+=1)n[r].d(1);n.length=t.length}},d(i){We(n,i),i&&m(e)}}}function Ct(l){let e,t,n=l[20]+"",i,s;return{c(){e=E("li"),t=E("code"),i=j(n),s=O()},l(r){e=D(r,"LI",{});var o=I(e);t=D(o,"CODE",{});var g=I(t);i=N(g,n),g.forEach(m),s=S(o),o.forEach(m)},m(r,o){M(r,e,o),a(e,t),a(t,i),a(e,s)},p(r,o){o&128&&n!==(n=r[20]+"")&&X(i,n)},d(r){r&&m(e)}}}function Rt(l){let e,t=l[25].name+"",n,i,s,r=l[25].slug+"",o,g,_,d,u=l[25].perms.length+"",p,F,w,A,P,h=l[25].perms,L=[];for(let c=0;c<h.length;c+=1)L[c]=Ct(At(l,h,c));return{c(){e=E("div"),n=j(t),i=j(`
						(`),s=E("code"),o=j(r),g=j(`)
						
						`),_=E("details"),d=E("summary"),p=j(u),F=j(" perm(s)"),w=O(),A=E("ul");for(let c=0;c<L.length;c+=1)L[c].c();P=O(),this.h()},l(c){e=D(c,"DIV",{class:!0});var y=I(e);n=N(y,t),i=N(y,`
						(`),s=D(y,"CODE",{});var k=I(s);o=N(k,r),k.forEach(m),g=N(y,`)
						
						`),_=D(y,"DETAILS",{});var R=I(_);d=D(R,"SUMMARY",{});var T=I(d);p=N(T,u),F=N(T," perm(s)"),T.forEach(m),w=S(R),A=D(R,"UL",{});var W=I(A);for(let z=0;z<L.length;z+=1)L[z].l(W);W.forEach(m),R.forEach(m),P=S(y),y.forEach(m),this.h()},h(){v(e,"class","group")},m(c,y){M(c,e,y),a(e,n),a(e,i),a(e,s),a(s,o),a(e,g),a(e,_),a(_,d),a(d,p),a(d,F),a(_,w),a(_,A);for(let k=0;k<L.length;k+=1)L[k].m(A,null);a(e,P)},p(c,y){if(y&128&&t!==(t=c[25].name+"")&&X(n,t),y&128&&r!==(r=c[25].slug+"")&&X(o,r),y&128&&u!==(u=c[25].perms.length+"")&&X(p,u),y&128){h=c[25].perms;let k;for(k=0;k<h.length;k+=1){const R=At(c,h,k);L[k]?L[k].p(R,y):(L[k]=Ct(R),L[k].c(),L[k].m(A,null))}for(;k<L.length;k+=1)L[k].d(1);L.length=h.length}},d(c){c&&m(e),We(L,c)}}}function Ut(l){let e,t,n,i,s,r,o,g,_,d,u,p,F=l[7].perms,w=[];for(let h=0;h<F.length;h+=1)w[h]=jt(wt(l,F,h));let A=l[7].default_perms,P=[];for(let h=0;h<A.length;h+=1)P[h]=Nt(Ft(l,A,h));return{c(){e=E("div"),t=E("div"),n=E("h4"),i=j("Your"),s=O(),r=E("ul");for(let h=0;h<w.length;h+=1)w[h].c();o=O(),g=E("div"),_=E("h4"),d=j("Default"),u=O(),p=E("ul");for(let h=0;h<P.length;h+=1)P[h].c();this.h()},l(h){e=D(h,"DIV",{class:!0});var L=I(e);t=D(L,"DIV",{class:!0});var c=I(t);n=D(c,"H4",{});var y=I(n);i=N(y,"Your"),y.forEach(m),s=S(c),r=D(c,"UL",{});var k=I(r);for(let z=0;z<w.length;z+=1)w[z].l(k);k.forEach(m),c.forEach(m),o=S(L),g=D(L,"DIV",{class:!0});var R=I(g);_=D(R,"H4",{});var T=I(_);d=N(T,"Default"),T.forEach(m),u=S(R),p=D(R,"UL",{});var W=I(p);for(let z=0;z<P.length;z+=1)P[z].l(W);W.forEach(m),R.forEach(m),L.forEach(m),this.h()},h(){v(t,"class","flex-in svelte-vmpbfb"),v(g,"class","flex-in svelte-vmpbfb"),v(e,"class","flex")},m(h,L){M(h,e,L),a(e,t),a(t,n),a(n,i),a(t,s),a(t,r);for(let c=0;c<w.length;c+=1)w[c].m(r,null);a(e,o),a(e,g),a(g,_),a(_,d),a(g,u),a(g,p);for(let c=0;c<P.length;c+=1)P[c].m(p,null)},p(h,L){if(L&128){F=h[7].perms;let c;for(c=0;c<F.length;c+=1){const y=wt(h,F,c);w[c]?w[c].p(y,L):(w[c]=jt(y),w[c].c(),w[c].m(r,null))}for(;c<w.length;c+=1)w[c].d(1);w.length=F.length}if(L&128){A=h[7].default_perms;let c;for(c=0;c<A.length;c+=1){const y=Ft(h,A,c);P[c]?P[c].p(y,L):(P[c]=Nt(y),P[c].c(),P[c].m(p,null))}for(;c<P.length;c+=1)P[c].d(1);P.length=A.length}},d(h){h&&m(e),We(w,h),We(P,h)}}}function jt(l){let e,t,n=l[20]+"",i,s;return{c(){e=E("li"),t=E("code"),i=j(n),s=O()},l(r){e=D(r,"LI",{});var o=I(e);t=D(o,"CODE",{});var g=I(t);i=N(g,n),g.forEach(m),s=S(o),o.forEach(m)},m(r,o){M(r,e,o),a(e,t),a(t,i),a(e,s)},p(r,o){o&128&&n!==(n=r[20]+"")&&X(i,n)},d(r){r&&m(e)}}}function Nt(l){let e,t,n,i=l[20]+"",s,r,o;return{c(){e=E("li"),t=E("a"),n=E("code"),s=j(i),o=O(),this.h()},l(g){e=D(g,"LI",{});var _=I(e);t=D(_,"A",{href:!0});var d=I(t);n=D(d,"CODE",{});var u=I(n);s=N(u,i),u.forEach(m),d.forEach(m),o=S(_),_.forEach(m),this.h()},h(){v(t,"href",r=new URL(`/perms/${l[20]}.html`,"https://kyii.nyiyui.ca".toString()).href)},m(g,_){M(g,e,_),a(e,t),a(t,n),a(n,s),a(e,o)},p(g,_){_&128&&i!==(i=g[20]+"")&&X(s,i),_&128&&r!==(r=new URL(`/perms/${g[20]}.html`,"https://kyii.nyiyui.ca".toString()).href)&&v(t,"href",r)},d(g){g&&m(e)}}}function Ql(l){let e,t,n,i,s,r,o,g,_,d,u,p,F,w=l[8]("config.id.uid")+"",A,P,h,L,c,y,k,R,T,W,z,me,be=l[8]("config.id.slug")+"",ye,we,x,Le,ae,q,ee,Ae,pe,fe,oe,de,Ee=l[8]("config.id.name")+"",ke,f,B,Z,K,Y,te,Pe,Te,Oe,ue,le,Ne,Je,_e,Qe,ce,Xe,et,G=l[0]&&Pt();_=new Ml({props:{multiple:!1,accept:"image/*",$$slots:{default:[zl]},$$scope:{ctx:l}}}),_.$on("drop",l[10]);let J=l[1]&&Tt(l);k=new al({props:{level:"info",$$slots:{default:[Bl]},$$scope:{ctx:l}}});const tt=[Kl,Hl,Gl,Yl,Vl],ge=[];function lt(b,C){return b[3]===!0?0:b[2]===""||b[2]===null?1:b[3]===null?2:b[3]===!1?3:4}q=lt(l),ee=ge[q]=tt[q](l);const nt=[Jl,ql,Wl],he=[];function rt(b,C){return b[4]===""||b[4]===null?0:b[4]!==""?1:2}Y=rt(l),te=he[Y]=nt[Y](l),_e=new ol({props:{msg:l[5],passive:!0}});let Q=l[9]&&Ot(l);return{c(){e=E("div"),t=E("div"),n=E("h2"),i=j(`Personal
			`),G&&G.c(),s=O(),r=E("form"),o=E("div"),g=E("div"),ne(_.$$.fragment),d=O(),J&&J.c(),u=O(),p=E("label"),F=E("span"),A=j(w),P=O(),h=E("input"),c=O(),y=E("span"),ne(k.$$.fragment),R=O(),T=E("br"),W=O(),z=E("label"),me=E("span"),ye=j(be),we=O(),x=E("input"),Le=O(),ae=E("span"),ee.c(),Ae=O(),pe=E("br"),fe=O(),oe=E("label"),de=E("span"),ke=j(Ee),f=O(),B=E("input"),Z=O(),K=E("span"),te.c(),Pe=O(),Te=E("br"),Oe=O(),ue=E("div"),le=E("input"),Je=O(),ne(_e.$$.fragment),Qe=O(),Q&&Q.c(),this.h()},l(b){e=D(b,"DIV",{class:!0});var C=I(e);t=D(C,"DIV",{class:!0});var De=I(t);n=D(De,"H2",{});var Ie=I(n);i=N(Ie,`Personal
			`),G&&G.l(Ie),Ie.forEach(m),s=S(De),r=D(De,"FORM",{class:!0});var U=I(r);o=D(U,"DIV",{class:!0});var ve=I(o);g=D(ve,"DIV",{class:!0});var Se=I(g);re(_.$$.fragment,Se),Se.forEach(m),d=S(ve),J&&J.l(ve),ve.forEach(m),u=S(U),p=D(U,"LABEL",{class:!0});var Me=I(p);F=D(Me,"SPAN",{class:!0});var it=I(F);A=N(it,w),it.forEach(m),P=S(Me),h=D(Me,"INPUT",{type:!0,class:!0}),Me.forEach(m),c=S(U),y=D(U,"SPAN",{class:!0,role:!0});var st=I(y);re(k.$$.fragment,st),st.forEach(m),R=S(U),T=D(U,"BR",{}),W=S(U),z=D(U,"LABEL",{class:!0});var ze=I(z);me=D(ze,"SPAN",{class:!0});var ot=I(me);ye=N(ot,be),ot.forEach(m),we=S(ze),x=D(ze,"INPUT",{id:!0,type:!0,autocomplete:!0,class:!0}),ze.forEach(m),Le=S(U),ae=D(U,"SPAN",{class:!0,role:!0});var at=I(ae);ee.l(at),at.forEach(m),Ae=S(U),pe=D(U,"BR",{}),fe=S(U),oe=D(U,"LABEL",{class:!0});var Be=I(oe);de=D(Be,"SPAN",{class:!0});var ft=I(de);ke=N(ft,Ee),ft.forEach(m),f=S(Be),B=D(Be,"INPUT",{id:!0,type:!0,autocomplete:!0,class:!0}),Be.forEach(m),Z=S(U),K=D(U,"SPAN",{class:!0,role:!0});var ut=I(K);te.l(ut),ut.forEach(m),Pe=S(U),Te=D(U,"BR",{}),Oe=S(U),ue=D(U,"DIV",{class:!0});var Ve=I(ue);le=D(Ve,"INPUT",{class:!0,type:!0}),Je=S(Ve),re(_e.$$.fragment,Ve),Ve.forEach(m),U.forEach(m),De.forEach(m),Qe=S(C),Q&&Q.l(C),C.forEach(m),this.h()},h(){v(g,"class","dropzone svelte-vmpbfb"),v(o,"class","img svelte-vmpbfb"),v(F,"class","label svelte-vmpbfb"),v(h,"type","text"),h.value=L=l[7]?l[7].uid:"",h.disabled=!0,v(h,"class","svelte-vmpbfb"),v(p,"class","svelte-vmpbfb"),v(y,"class","status svelte-vmpbfb"),v(y,"role","status"),v(me,"class","label svelte-vmpbfb"),v(x,"id","slug"),v(x,"type","text"),v(x,"autocomplete","username"),v(x,"class","svelte-vmpbfb"),v(z,"class","svelte-vmpbfb"),v(ae,"class","status svelte-vmpbfb"),v(ae,"role","status"),v(de,"class","label svelte-vmpbfb"),v(B,"id","name"),v(B,"type","name"),v(B,"autocomplete","name"),v(B,"class","svelte-vmpbfb"),v(oe,"class","svelte-vmpbfb"),v(K,"class","status svelte-vmpbfb"),v(K,"role","status"),v(le,"class","update svelte-vmpbfb"),v(le,"type","button"),le.value=Ne=l[8]("config.update"),le.disabled=l[6],v(ue,"class","commit svelte-vmpbfb"),v(r,"class","identity svelte-vmpbfb"),v(t,"class","flex-in svelte-vmpbfb"),v(e,"class","flex")},m(b,C){M(b,e,C),a(e,t),a(t,n),a(n,i),G&&G.m(n,null),a(t,s),a(t,r),a(r,o),a(o,g),ie(_,g,null),a(o,d),J&&J.m(o,null),a(r,u),a(r,p),a(p,F),a(F,A),a(p,P),a(p,h),a(r,c),a(r,y),ie(k,y,null),a(r,R),a(r,T),a(r,W),a(r,z),a(z,me),a(me,ye),a(z,we),a(z,x),Ye(x,l[2]),a(r,Le),a(r,ae),ge[q].m(ae,null),a(r,Ae),a(r,pe),a(r,fe),a(r,oe),a(oe,de),a(de,ke),a(oe,f),a(oe,B),Ye(B,l[4]),a(r,Z),a(r,K),he[Y].m(K,null),a(r,Pe),a(r,Te),a(r,Oe),a(r,ue),a(ue,le),a(ue,Je),ie(_e,ue,null),a(e,Qe),Q&&Q.m(e,null),ce=!0,Xe||(et=[$(x,"input",l[13]),$(x,"input",l[11]),$(B,"input",l[14]),$(B,"input",l[15]),$(le,"click",l[12])],Xe=!0)},p(b,[C]){b[0]?G?C&1&&V(G,1):(G=Pt(),G.c(),V(G,1),G.m(n,null)):G&&(Ze(),H(G,1,1,()=>{G=null}),$e());const De={};C&1073742080&&(De.$$scope={dirty:C,ctx:b}),_.$set(De),b[1]?J?J.p(b,C):(J=Tt(b),J.c(),J.m(o,null)):J&&(J.d(1),J=null),(!ce||C&256)&&w!==(w=b[8]("config.id.uid")+"")&&X(A,w),(!ce||C&128&&L!==(L=b[7]?b[7].uid:"")&&h.value!==L)&&(h.value=L);const Ie={};C&1073742080&&(Ie.$$scope={dirty:C,ctx:b}),k.$set(Ie),(!ce||C&256)&&be!==(be=b[8]("config.id.slug")+"")&&X(ye,be),C&4&&x.value!==b[2]&&Ye(x,b[2]);let U=q;q=lt(b),q===U?ge[q].p(b,C):(Ze(),H(ge[U],1,1,()=>{ge[U]=null}),$e(),ee=ge[q],ee?ee.p(b,C):(ee=ge[q]=tt[q](b),ee.c()),V(ee,1),ee.m(ae,null)),(!ce||C&256)&&Ee!==(Ee=b[8]("config.id.name")+"")&&X(ke,Ee),C&16&&Ye(B,b[4]);let ve=Y;Y=rt(b),Y===ve?he[Y].p(b,C):(Ze(),H(he[ve],1,1,()=>{he[ve]=null}),$e(),te=he[Y],te?te.p(b,C):(te=he[Y]=nt[Y](b),te.c()),V(te,1),te.m(K,null)),(!ce||C&256&&Ne!==(Ne=b[8]("config.update")))&&(le.value=Ne),(!ce||C&64)&&(le.disabled=b[6]);const Se={};C&32&&(Se.msg=b[5]),_e.$set(Se),b[9]?Q?Q.p(b,C):(Q=Ot(b),Q.c(),Q.m(e,null)):Q&&(Q.d(1),Q=null)},i(b){ce||(V(G),V(_.$$.fragment,b),V(k.$$.fragment,b),V(ee),V(te),V(_e.$$.fragment,b),ce=!0)},o(b){H(G),H(_.$$.fragment,b),H(k.$$.fragment,b),H(ee),H(te),H(_e.$$.fragment,b),ce=!1},d(b){b&&m(e),G&&G.d(),se(_),J&&J.d(),se(k),ge[q].d(),he[Y].d(),se(_e),Q&&Q.d(),Xe=!1,Vt(et)}}}function Xl(l,e,t){let n,i,s,r;Ge(l,vt,T=>t(18,n=T)),Ge(l,il,T=>t(19,i=T)),Ge(l,sl,T=>t(8,s=T)),Ge(l,fl,T=>t(9,r=T));let o=null,g=null;function _(T){const{acceptedFiles:W}=T.detail;W.length&&(o=W[0],g&&URL.revokeObjectURL(g),t(1,g=URL.createObjectURL(o))),t(0,w=!0)}let d,u,p,F,{idUnsavedChanges:w=!1}=e,A,P=!1,h;Yt(async()=>{try{t(7,h=await He.getId()),t(2,{slug:u,name:F}=h,u,t(4,F)),d=u,L()}catch(T){t(5,A=`\u30A2\u30A4\u30C7\u30F3\u30C6\u30A3\u30C6\u30A3\u306E\u53D6\u5F97: ${T.toString()}`)}});async function L(){if(t(0,w=!0),u==d){t(3,p=null);return}t(3,p=await He.userExists(u))}async function c(){t(6,P=!0);try{await Promise.all([He.submitId({slug:u,name:F}),(async()=>{o&&await He.submitImg(o)})()]),t(5,A=""),t(0,w=!1),console.log("submitId done"),console.log("currentUlid",i);const T=i;n.get(T)&&(n.set(T,pt(mt({},n.get(T)),{slug:u,name:F})),vt.set(n))}catch(T){console.error(`submitId: ${T}`),t(5,A=T.toString())}t(6,P=!1)}function y(){u=this.value,t(2,u)}function k(){F=this.value,t(4,F)}const R=()=>t(0,w=!0);return l.$$set=T=>{"idUnsavedChanges"in T&&t(0,w=T.idUnsavedChanges)},[w,g,u,p,F,A,P,h,s,r,_,L,c,y,k,R]}class on extends Mt{constructor(e){super();zt(this,e,Xl,Ql,Bt,{idUnsavedChanges:0})}}export{on as I};

import{S as st,i as ot,s as it,e as d,t as v,c as h,a as b,h as g,d as c,g as U,J as f,_ as X,H as _t,j as O,w as ge,x as be,y as ke,q as H,o as T,B as Ee,b as E,k as B,m as P,a5 as dt,n as Ve,p as je,a2 as ut,G as ht,K as Fe,Y as pt,a3 as ft,E as ct,l as ve,ai as Qe,aj as mt,M as vt,v as gt,a6 as bt,a4 as kt}from"../chunks/index-471c5598.js";import{L as Et}from"../chunks/Loading-28866ca5.js";import{B as $t}from"../chunks/BoxError-e4fbeeb7.js";import{Y as yt,m as Ut,a as se,f as Nt}from"../chunks/api2-564f7f8d.js";import{U as It}from"../chunks/UnsavedChanges-a25429c7.js";import{t as Z}from"../chunks/util-92d9fe41.js";import"../chunks/Box-a27f9004.js";import"../chunks/Icon-b960e3f0.js";import"../chunks/store-669d404b.js";import"../chunks/index-0b2b7ad8.js";import"../chunks/singletons-d1fb5791.js";function We(r,e,n){const l=r.slice();return l[12]=e[n][0],l[13]=e[n][1],l}function Xe(r){let e,n=r[4]("untitled")+"",l,t,a;return{c(){e=d("em"),l=v(n)},l(s){e=h(s,"EM",{});var i=b(e);l=g(i,n),i.forEach(c)},m(s,i){U(s,e,i),f(e,l),t||(a=X(e,"click",function(){_t(r[3].focus())&&r[3].focus().apply(this,arguments)}),t=!0)},p(s,i){r=s,i&16&&n!==(n=r[4]("untitled")+"")&&O(l,n)},d(s){s&&c(e),t=!1,a()}}}function Ze(r){let e,n;return e=new It({}),{c(){ge(e.$$.fragment)},l(l){be(e.$$.fragment,l)},m(l,t){ke(e,l,t),n=!0},i(l){n||(H(e.$$.fragment,l),n=!0)},o(l){T(e.$$.fragment,l),n=!1},d(l){Ee(e,l)}}}function xe(r){let e,n=r[4]("ul.tag.you")+"",l;return{c(){e=d("span"),l=v(n),this.h()},l(t){e=h(t,"SPAN",{class:!0});var a=b(e);l=g(a,n),a.forEach(c),this.h()},h(){E(e,"class","tag you svelte-aah86d")},m(t,a){U(t,e,a),f(e,l)},p(t,a){a&16&&n!==(n=t[4]("ul.tag.you")+"")&&O(l,n)},d(t){t&&c(e)}}}function wt(r){let e,n=r[4]("ul.tag.ended")+"",l;return{c(){e=d("span"),l=v(n),this.h()},l(t){e=h(t,"SPAN",{class:!0});var a=b(e);l=g(a,n),a.forEach(c),this.h()},h(){E(e,"class","tag ended svelte-aah86d")},m(t,a){U(t,e,a),f(e,l)},p(t,a){a&16&&n!==(n=t[4]("ul.tag.ended")+"")&&O(l,n)},d(t){t&&c(e)}}}function St(r){let e,n=r[4]("ul.tag.logged_out")+"",l;return{c(){e=d("span"),l=v(n),this.h()},l(t){e=h(t,"SPAN",{class:!0});var a=b(e);l=g(a,n),a.forEach(c),this.h()},h(){E(e,"class","tag logged_out svelte-aah86d")},m(t,a){U(t,e,a),f(e,l)},p(t,a){a&16&&n!==(n=t[4]("ul.tag.logged_out")+"")&&O(l,n)},d(t){t&&c(e)}}}function At(r){let e,n=r[4]("ul.tag.revoked")+"",l;return{c(){e=d("span"),l=v(n),this.h()},l(t){e=h(t,"SPAN",{class:!0});var a=b(e);l=g(a,n),a.forEach(c),this.h()},h(){E(e,"class","tag revoked svelte-aah86d")},m(t,a){U(t,e,a),f(e,l)},p(t,a){a&16&&n!==(n=t[4]("ul.tag.revoked")+"")&&O(l,n)},d(t){t&&c(e)}}}function Dt(r){let e,n=r[4]("ul.tag.ongoing")+"",l;return{c(){e=d("span"),l=v(n),this.h()},l(t){e=h(t,"SPAN",{class:!0});var a=b(e);l=g(a,n),a.forEach(c),this.h()},h(){E(e,"class","tag ongoing svelte-aah86d")},m(t,a){U(t,e,a),f(e,l)},p(t,a){a&16&&n!==(n=t[4]("ul.tag.ongoing")+"")&&O(l,n)},d(t){t&&c(e)}}}function et(r){let e,n,l,t;return{c(){e=d("input"),this.h()},l(a){e=h(a,"INPUT",{class:!0,type:!0}),this.h()},h(){E(e,"class","warn"),E(e,"type","button"),e.value="Revoke",e.disabled=n=r[0].current},m(a,s){U(a,e,s),l||(t=X(e,"click",r[6]),l=!0)},p(a,s){s&1&&n!==(n=a[0].current)&&(e.disabled=n)},d(a){a&&c(e),l=!1,t()}}}function Lt(r){let e,n;return{c(){e=d("em"),n=v("Nothing (initial session)")},l(l){e=h(l,"EM",{});var t=b(e);n=g(t,"Nothing (initial session)"),t.forEach(c)},m(l,t){U(l,e,t),f(e,n)},p:ct,d(l){l&&c(e)}}}function Ct(r){let e,n=r[0].against.name+"",l,t;return{c(){e=d("a"),l=v(n),this.h()},l(a){e=h(a,"A",{href:!0});var s=b(e);l=g(s,n),s.forEach(c),this.h()},h(){E(e,"href",t=`/config#${r[0].against.uuid}`)},m(a,s){U(a,e,s),f(e,l)},p(a,s){s&1&&n!==(n=a[0].against.name+"")&&O(l,n),s&1&&t!==(t=`/config#${a[0].against.uuid}`)&&E(e,"href",t)},d(a){a&&c(e)}}}function Rt(r){let e,n=r[5](r[0].last*1e3,Z)+"",l,t;return{c(){e=v("Last Seen: "),l=v(n),t=d("br")},l(a){e=g(a,"Last Seen: "),l=g(a,n),t=h(a,"BR",{})},m(a,s){U(a,e,s),U(a,l,s),U(a,t,s)},p(a,s){s&33&&n!==(n=a[5](a[0].last*1e3,Z)+"")&&O(l,n)},d(a){a&&c(e),a&&c(l),a&&c(t)}}}function Bt(r){let e,n=r[5](r[0].end*1e3,Z)+"",l,t;return{c(){e=v("End: "),l=v(n),t=d("br")},l(a){e=g(a,"End: "),l=g(a,n),t=h(a,"BR",{})},m(a,s){U(a,e,s),U(a,l,s),U(a,t,s)},p(a,s){s&33&&n!==(n=a[5](a[0].end*1e3,Z)+"")&&O(l,n)},d(a){a&&c(e),a&&c(l),a&&c(t)}}}function tt(r){let e,n=r[4](`ul.reason.${r[0].reason}`,{default:r[0].reason})+"",l;return{c(){e=v("Reason of revocation: "),l=v(n)},l(t){e=g(t,"Reason of revocation: "),l=g(t,n)},m(t,a){U(t,e,a),U(t,l,a)},p(t,a){a&17&&n!==(n=t[4](`ul.reason.${t[0].reason}`,{default:t[0].reason})+"")&&O(l,n)},d(t){t&&c(e),t&&c(l)}}}function lt(r){let e,n,l=r[12]+"",t,a,s,i=r[13]+"",o,_;return{c(){e=d("li"),n=d("code"),t=v(l),a=v(": "),s=d("code"),o=v(i),_=B()},l($){e=h($,"LI",{});var p=b(e);n=h(p,"CODE",{});var q=b(n);t=g(q,l),q.forEach(c),a=g(p,": "),s=h(p,"CODE",{});var V=b(s);o=g(V,i),V.forEach(c),_=P(p),p.forEach(c)},m($,p){U($,e,p),f(e,n),f(n,t),f(e,a),f(e,s),f(s,o),f(e,_)},p($,p){p&1&&l!==(l=$[12]+"")&&O(t,l),p&1&&i!==(i=$[13]+"")&&O(o,i)},d($){$&&c(e)}}}function Pt(r){let e,n,l,t,a,s,i,o,_,$,p,q,V,x,w,$e,z,m,ee,ye,Ue,te,le=r[0].uuid+"",oe,Ne,Ie,ne=r[0].extra.remote+"",ie,we,Se,ue,Ae,De,ae=r[5](r[0].start*1e3,Z)+"",fe,Le,Ce,ce,Re,G,re,Be,Pe,J,K,Oe,Me,S=!r[1]&&Xe(r),N=r[2]&&Ze(),A=r[0].current&&xe(r);function Te(u,k){return u[0].end===null?Dt:u[0].reason==="revoke"?At:u[0].reason==="logout"?St:wt}let _e=Te(r),j=_e(r),D=r[0].end===null&&et(r);function qe(u,k){return u[0].against?Ct:Lt}let de=qe(r),M=de(r);function Ye(u,k){if(u[0].end!==null)return Bt;if(u[0].last!==null)return Rt}let F=Ye(r),L=F&&F(r),C=r[0].reason&&tt(r),Q=Array.from(Object.entries(r[0].extra.headers)),R=[];for(let u=0;u<Q.length;u+=1)R[u]=lt(We(r,Q,u));return{c(){e=d("section"),n=d("div"),l=d("h2"),t=d("span"),a=B(),S&&S.c(),s=B(),N&&N.c(),i=B(),o=d("div"),A&&A.c(),_=B(),j.c(),$=B(),p=d("div"),D&&D.c(),q=B(),V=d("input"),x=B(),w=d("input"),$e=B(),z=d("div"),m=d("div"),ee=d("h3"),ye=v("Etc"),Ue=v(`
			UUID:`),te=d("code"),oe=v(le),Ne=d("br"),Ie=v(`
			Remote: `),ie=v(ne),we=d("br"),Se=v(`
			Against:
			`),M.c(),ue=B(),Ae=d("br"),De=v(`
			Start: `),fe=v(ae),Le=d("br"),Ce=B(),L&&L.c(),ce=B(),C&&C.c(),Re=B(),G=d("div"),re=d("h3"),Be=v("Headers"),Pe=B(),J=d("ul");for(let u=0;u<R.length;u+=1)R[u].c();this.h()},l(u){e=h(u,"SECTION",{class:!0});var k=b(e);n=h(k,"DIV",{class:!0});var y=b(n);l=h(y,"H2",{class:!0});var Y=b(l);t=h(Y,"SPAN",{contenteditable:!0}),b(t).forEach(c),a=P(Y),S&&S.l(Y),s=P(Y),N&&N.l(Y),Y.forEach(c),i=P(y),o=h(y,"DIV",{class:!0});var he=b(o);A&&A.l(he),_=P(he),j.l(he),he.forEach(c),$=P(y),p=h(y,"DIV",{});var W=b(p);D&&D.l(W),q=P(W),V=h(W,"INPUT",{class:!0,type:!0}),x=P(W),w=h(W,"INPUT",{class:!0,type:!0}),W.forEach(c),y.forEach(c),$e=P(k),z=h(k,"DIV",{class:!0});var pe=b(z);m=h(pe,"DIV",{class:!0});var I=b(m);ee=h(I,"H3",{});var ze=b(ee);ye=g(ze,"Etc"),ze.forEach(c),Ue=g(I,`
			UUID:`),te=h(I,"CODE",{});var Ge=b(te);oe=g(Ge,le),Ge.forEach(c),Ne=h(I,"BR",{}),Ie=g(I,`
			Remote: `),ie=g(I,ne),we=h(I,"BR",{}),Se=g(I,`
			Against:
			`),M.l(I),ue=P(I),Ae=h(I,"BR",{}),De=g(I,`
			Start: `),fe=g(I,ae),Le=h(I,"BR",{}),Ce=P(I),L&&L.l(I),ce=P(I),C&&C.l(I),I.forEach(c),Re=P(pe),G=h(pe,"DIV",{class:!0});var me=b(G);re=h(me,"H3",{});var Je=b(re);Be=g(Je,"Headers"),Je.forEach(c),Pe=P(me),J=h(me,"UL",{class:!0});var Ke=b(J);for(let He=0;He<R.length;He+=1)R[He].l(Ke);Ke.forEach(c),me.forEach(c),pe.forEach(c),k.forEach(c),this.h()},h(){E(t,"contenteditable","true"),r[1]===void 0&&dt(()=>r[9].call(t)),E(l,"class","svelte-aah86d"),E(o,"class","tags"),E(V,"class","delete"),E(V,"type","button"),V.value="Delete",E(w,"class","update"),E(w,"type","button"),w.value="Update",E(n,"class","meta flex flex-row svelte-aah86d"),E(m,"class","etc svelte-aah86d"),E(J,"class","headers-ul svelte-aah86d"),E(G,"class","headers svelte-aah86d"),E(z,"class","content svelte-aah86d"),E(e,"class","ul panel flex flex-column")},m(u,k){U(u,e,k),f(e,n),f(n,l),f(l,t),r[1]!==void 0&&(t.textContent=r[1]),r[10](t),f(l,a),S&&S.m(l,null),f(l,s),N&&N.m(l,null),f(n,i),f(n,o),A&&A.m(o,null),f(o,_),j.m(o,null),f(n,$),f(n,p),D&&D.m(p,null),f(p,q),f(p,V),f(p,x),f(p,w),f(e,$e),f(e,z),f(z,m),f(m,ee),f(ee,ye),f(m,Ue),f(m,te),f(te,oe),f(m,Ne),f(m,Ie),f(m,ie),f(m,we),f(m,Se),M.m(m,null),f(m,ue),f(m,Ae),f(m,De),f(m,fe),f(m,Le),f(m,Ce),L&&L.m(m,null),f(m,ce),C&&C.m(m,null),f(z,Re),f(z,G),f(G,re),f(re,Be),f(G,Pe),f(G,J);for(let y=0;y<R.length;y+=1)R[y].m(J,null);K=!0,Oe||(Me=[X(t,"input",r[9]),X(V,"click",r[7]),X(w,"click",r[8])],Oe=!0)},p(u,[k]){if(k&2&&u[1]!==t.textContent&&(t.textContent=u[1]),u[1]?S&&(S.d(1),S=null):S?S.p(u,k):(S=Xe(u),S.c(),S.m(l,s)),u[2]?N?k&4&&H(N,1):(N=Ze(),N.c(),H(N,1),N.m(l,null)):N&&(Ve(),T(N,1,1,()=>{N=null}),je()),u[0].current?A?A.p(u,k):(A=xe(u),A.c(),A.m(o,_)):A&&(A.d(1),A=null),_e===(_e=Te(u))&&j?j.p(u,k):(j.d(1),j=_e(u),j&&(j.c(),j.m(o,null))),u[0].end===null?D?D.p(u,k):(D=et(u),D.c(),D.m(p,q)):D&&(D.d(1),D=null),(!K||k&1)&&le!==(le=u[0].uuid+"")&&O(oe,le),(!K||k&1)&&ne!==(ne=u[0].extra.remote+"")&&O(ie,ne),de===(de=qe(u))&&M?M.p(u,k):(M.d(1),M=de(u),M&&(M.c(),M.m(m,ue))),(!K||k&33)&&ae!==(ae=u[5](u[0].start*1e3,Z)+"")&&O(fe,ae),F===(F=Ye(u))&&L?L.p(u,k):(L&&L.d(1),L=F&&F(u),L&&(L.c(),L.m(m,ce))),u[0].reason?C?C.p(u,k):(C=tt(u),C.c(),C.m(m,null)):C&&(C.d(1),C=null),k&1){Q=Array.from(Object.entries(u[0].extra.headers));let y;for(y=0;y<Q.length;y+=1){const Y=We(u,Q,y);R[y]?R[y].p(Y,k):(R[y]=lt(Y),R[y].c(),R[y].m(J,null))}for(;y<R.length;y+=1)R[y].d(1);R.length=Q.length}},i(u){K||(H(N),K=!0)},o(u){T(N),K=!1},d(u){u&&c(e),r[10](null),S&&S.d(),N&&N.d(),A&&A.d(),j.d(),D&&D.d(),M.d(),L&&L.d(),C&&C.d(),ut(R,u),Oe=!1,ht(Me)}}}function Ot(r,e,n){let l,t;Fe(r,yt,w=>n(4,l=w)),Fe(r,Ut,w=>n(5,t=w));const a=pt();let{ul:s}=e,i=!1,o=s.name||null,_;async function $(){await se.revokeUl(s.uuid),console.log(`revoke UL ${s.uuid}`),n(0,s.end=new Date,s),n(0,s.reason="revoke",s),console.log(s),a("revoke")}async function p(){await se.deleteUl(s.uuid),console.log(`delete UL ${s.uuid}; callback`),a("delete")}async function q(){await se.editUl(s.uuid,o),console.log(`edit UL ${s.uuid}`),n(0,s.name=o,s)}function V(){o=this.textContent,n(1,o)}function x(w){ft[w?"unshift":"push"](()=>{_=w,n(3,_)})}return r.$$set=w=>{"ul"in w&&n(0,s=w.ul)},r.$$.update=()=>{r.$$.dirty&3&&n(2,i=(s.name||"")!==(o||""))},[s,o,i,_,l,t,$,p,q,V,x]}class Ht extends st{constructor(e){super();ot(this,e,Ot,Pt,it,{ul:0})}}function nt(r,e,n){const l=r.slice();return l[4]=e[n][0],l[5]=e[n][1],l[6]=e,l[7]=n,l}function at(r){let e,n,l,t={ctx:r,current:null,token:null,hasCatch:!0,pending:Mt,then:jt,catch:Vt,value:0,error:8,blocks:[,,,]};return Qe(n=r[0],t),{c(){e=ve(),t.block.c()},l(a){e=ve(),t.block.l(a)},m(a,s){U(a,e,s),t.block.m(a,t.anchor=s),t.mount=()=>e.parentNode,t.anchor=e,l=!0},p(a,s){r=a,t.ctx=r,s&1&&n!==(n=r[0])&&Qe(n,t)||mt(t,r,s)},i(a){l||(H(t.block),l=!0)},o(a){for(let s=0;s<3;s+=1){const i=t.blocks[s];T(i)}l=!1},d(a){a&&c(e),t.block.d(a),t.token=null,t=null}}}function Vt(r){let e,n;return e=new $t({props:{msg:r[8],passive:!0}}),{c(){ge(e.$$.fragment)},l(l){be(e.$$.fragment,l)},m(l,t){ke(e,l,t),n=!0},p(l,t){const a={};t&1&&(a.msg=l[8]),e.$set(a)},i(l){n||(H(e.$$.fragment,l),n=!0)},o(l){T(e.$$.fragment,l),n=!1},d(l){Ee(e,l)}}}function jt(r){let e,n,l=Array.from(r[0].entries()),t=[];for(let s=0;s<l.length;s+=1)t[s]=rt(nt(r,l,s));const a=s=>T(t[s],1,1,()=>{t[s]=null});return{c(){for(let s=0;s<t.length;s+=1)t[s].c();e=ve()},l(s){for(let i=0;i<t.length;i+=1)t[i].l(s);e=ve()},m(s,i){for(let o=0;o<t.length;o+=1)t[o].m(s,i);U(s,e,i),n=!0},p(s,i){if(i&1){l=Array.from(s[0].entries());let o;for(o=0;o<l.length;o+=1){const _=nt(s,l,o);t[o]?(t[o].p(_,i),H(t[o],1)):(t[o]=rt(_),t[o].c(),H(t[o],1),t[o].m(e.parentNode,e))}for(Ve(),o=l.length;o<t.length;o+=1)a(o);je()}},i(s){if(!n){for(let i=0;i<l.length;i+=1)H(t[i]);n=!0}},o(s){t=t.filter(Boolean);for(let i=0;i<t.length;i+=1)T(t[i]);n=!1},d(s){ut(t,s),s&&c(e)}}}function rt(r){let e,n,l;function t(i){r[2](i,r[5],r[6],r[7])}function a(){return r[3](r[0],r[4])}let s={client:se};return r[5]!==void 0&&(s.ul=r[5]),e=new Ht({props:s}),ft.push(()=>kt(e,"ul",t)),e.$on("delete",a),{c(){ge(e.$$.fragment)},l(i){be(e.$$.fragment,i)},m(i,o){ke(e,i,o),l=!0},p(i,o){r=i;const _={};!n&&o&1&&(n=!0,_.ul=r[5],bt(()=>n=!1)),e.$set(_)},i(i){l||(H(e.$$.fragment,i),l=!0)},o(i){T(e.$$.fragment,i),l=!1},d(i){Ee(e,i)}}}function Mt(r){let e,n;return e=new Et({}),{c(){ge(e.$$.fragment)},l(l){be(e.$$.fragment,l)},m(l,t){ke(e,l,t),n=!0},p:ct,i(l){n||(H(e.$$.fragment,l),n=!0)},o(l){T(e.$$.fragment,l),n=!1},d(l){Ee(e,l)}}}function Tt(r){let e,n,l,t,a,s,i,o=r[0]&&at(r);return{c(){e=B(),n=d("main"),l=d("input"),t=B(),o&&o.c(),this.h()},l(_){vt('[data-svelte="svelte-1dzafj9"]',document.head).forEach(c),e=P(_),n=h(_,"MAIN",{class:!0});var p=b(n);l=h(p,"INPUT",{type:!0}),t=P(p),o&&o.l(p),p.forEach(c),this.h()},h(){document.title="Sessions",E(l,"type","button"),l.value="Reload",E(n,"class","logout")},m(_,$){U(_,e,$),U(_,n,$),f(n,l),f(n,t),o&&o.m(n,null),a=!0,s||(i=X(l,"click",r[1]),s=!0)},p(_,[$]){_[0]?o?(o.p(_,$),$&1&&H(o,1)):(o=at(_),o.c(),H(o,1),o.m(n,null)):o&&(Ve(),T(o,1,1,()=>{o=null}),je())},i(_){a||(H(o),a=!0)},o(_){T(o),a=!1},d(_){_&&c(e),_&&c(n),o&&o.d(),s=!1,i()}}}function qt(r,e,n){let l;function t(){n(0,l=se.ulsList())}gt(async()=>{await Nt(),t()});function a(i,o,_,$){_[$][1]=i}return[l,t,a,(i,o)=>{i.splice(o,1),n(0,i)}]}class el extends st{constructor(e){super();ot(this,e,qt,Tt,it,{})}}export{el as default};
